{"code":"import React, { useCallback, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { IconAdd, IconClose } from '../icons/interface';\r\nimport { Spinner } from '../spinner';\r\nimport { ButtonIcon } from '../button';\r\nexport const InputImageSingle = ({ onChange, maxDimension, minDimension, maxFileSize, onlySquare = false, preview: previewSrc = '', onError, }) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [preview, setPreview] = useState(previewSrc);\r\n    const onDrop = useCallback((acceptedFiles, onDropRejected) => {\r\n        if (onDropRejected.length !== 0) {\r\n            onError(onDropRejected[0].errors[0]);\r\n        }\r\n        else {\r\n            /**\r\n             * Render image to calculate the dimensions\r\n             */\r\n            setLoading(true);\r\n            const image = new Image();\r\n            image.addEventListener('load', () => {\r\n                setLoading(false);\r\n                if (maxDimension &&\r\n                    (image.width > maxDimension || image.height > maxDimension)) {\r\n                    onError({\r\n                        code: 'wrong-dimension',\r\n                        message: `Please provide a squared image with size between ${minDimension}px and ${maxDimension}px on each side`,\r\n                    });\r\n                }\r\n                else if (minDimension &&\r\n                    (image.width < minDimension || image.height < minDimension)) {\r\n                    onError({\r\n                        code: 'wrong-dimension',\r\n                        message: `Please provide a squared image with size between ${minDimension}px and ${maxDimension}px on each side`,\r\n                    });\r\n                    return;\r\n                }\r\n                else if (onlySquare &&\r\n                    image.height !== image.width // check if the image is square or not\r\n                ) {\r\n                    onError({\r\n                        code: 'wrong-dimension',\r\n                        message: `Please provide a squared image with size between ${minDimension}px and ${maxDimension}px on each side`,\r\n                    });\r\n                }\r\n                else {\r\n                    onChange(acceptedFiles[0]);\r\n                    setPreview(image.src);\r\n                }\r\n            });\r\n            image.src = URL.createObjectURL(acceptedFiles[0]);\r\n        }\r\n    }, [maxDimension, minDimension, onChange, onError, onlySquare]);\r\n    const { getRootProps, getInputProps, isDragActive: isdragactive, } = useDropzone({\r\n        onDrop,\r\n        ...(maxFileSize && { maxSize: maxFileSize }),\r\n        accept: 'image/jpg, image/jpeg, image/png, image/gif, image/svg+xml',\r\n    });\r\n    if (loading) {\r\n        return (React.createElement(LoadingContainer, null,\r\n            React.createElement(Spinner, { size: \"small\" })));\r\n    }\r\n    return preview !== '' ? (React.createElement(ImageContainer, null,\r\n        React.createElement(Preview, { src: preview }),\r\n        React.createElement(StyledButton, { icon: React.createElement(IconClose, null), size: \"small\", mode: \"secondary\", onClick: () => {\r\n                setPreview('');\r\n                onChange(null);\r\n            } }))) : (React.createElement(DefaultContainer, Object.assign({}, { isdragactive }, { \"data-testid\": \"input-image\" }, getRootProps()),\r\n        React.createElement(StyledIconAdd, Object.assign({}, { isdragactive })),\r\n        React.createElement(\"input\", Object.assign({}, getInputProps()))));\r\n};\r\nconst DefaultContainer = styled.div.attrs(({ isdragactive }) => ({\r\n    className: `flex items-center justify-center bg-ui-0\r\n    h-8 w-8 border-dashed ${isdragactive ? 'border-primary-500' : 'border-ui-100'} border-2 rounded-xl cursor-pointer`,\r\n})) ``;\r\nconst LoadingContainer = styled.div.attrs({\r\n    className: `flex items-center justify-center bg-ui-0 \r\n    h-8 w-8 border-dashed border-primary-500 border-2 rounded-xl`,\r\n}) ``;\r\nconst ImageContainer = styled.div.attrs({\r\n    className: 'relative h-8 w-8',\r\n}) ``;\r\nconst Preview = styled.img.attrs({\r\n    className: 'rounded-xl bg-ui-0 h-8 w-8',\r\n}) ``;\r\nconst StyledButton = styled(ButtonIcon).attrs({\r\n    className: 'absolute -top-2 -right-1.75',\r\n}) `\r\n  box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\r\n    0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\r\n`;\r\nconst StyledIconAdd = styled(IconAdd).attrs(({ isdragactive }) => ({\r\n    className: `${isdragactive ? 'text-primary-500' : 'text-ui-600'}`,\r\n})) ``;\r\n//# sourceMappingURL=inputImageSingle.js.map","references":["/root/repo/chainlink-spring-hackathon/frontend/node_modules/@types/react/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@types/styled-components/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/react-dropzone/typings/react-dropzone.d.ts","/root/repo/chainlink-spring-hackathon/frontend/packages/ui-components/src/components/icons/interface/index.ts","/root/repo/chainlink-spring-hackathon/frontend/packages/ui-components/src/components/spinner/index.ts","/root/repo/chainlink-spring-hackathon/frontend/packages/ui-components/src/components/button/index.ts"],"map":"{\"version\":3,\"file\":\"inputImageSingle.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/input/inputImageSingle.tsx\"],\"names\":[],\"mappings\":\"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\"}"}
