{"code":"import Link from '@tiptap/extension-link';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport { EditorContent, useEditor } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport React, { useCallback, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styled from 'styled-components';\r\nimport { ButtonIcon } from '../button';\r\nimport { IconBold, IconExpand, IconItalic, IconLinkSet, IconLinkUnset, IconListOrdered, IconListUnordered, } from '../icons';\r\nconst MenuBar = ({ editor, disabled, isExpanded, setIsExpanded, fullScreen = false, }) => {\r\n    const setLink = useCallback(() => {\r\n        const previousUrl = editor?.getAttributes('link').href;\r\n        const url = window.prompt('URL', previousUrl);\r\n        if (url === null) {\r\n            return;\r\n        }\r\n        if (url === '') {\r\n            editor?.chain().focus().extendMarkRange('link').unsetLink().run();\r\n            return;\r\n        }\r\n        // TODO: All possible url validations should be done here instead of just checking for protocol\r\n        if (url.indexOf('http://') === -1 && url.indexOf('https://') === -1) {\r\n            editor\r\n                ?.chain()\r\n                .focus()\r\n                .extendMarkRange('link')\r\n                .setLink({ href: `http://${url}` })\r\n                .run();\r\n        }\r\n        else {\r\n            editor\r\n                ?.chain()\r\n                .focus()\r\n                .extendMarkRange('link')\r\n                .setLink({ href: url })\r\n                .run();\r\n        }\r\n    }, [editor]);\r\n    if (!editor) {\r\n        return null;\r\n    }\r\n    return (React.createElement(StyledMenuBar, { disabled: disabled, fullScreen: fullScreen },\r\n        React.createElement(Toolgroup, null,\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconBold, null), mode: \"ghost\", isActive: editor.isActive('bold'), onClick: () => editor.chain().focus().toggleBold().run(), disabled: disabled }),\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconItalic, null), mode: \"ghost\", isActive: editor.isActive('italic'), onClick: () => editor.chain().focus().toggleItalic().run(), disabled: disabled }),\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconLinkSet, null), mode: \"ghost\", isActive: editor.isActive('link'), onClick: setLink, disabled: disabled }),\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconLinkUnset, null), mode: \"ghost\", onClick: () => editor.chain().focus().unsetLink().run(), disabled: !editor.isActive('link') || disabled }),\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconListOrdered, null), mode: \"ghost\", isActive: editor.isActive('bulletList'), onClick: () => editor.chain().focus().toggleBulletList().run(), disabled: disabled }),\r\n            React.createElement(ButtonIcon, { icon: React.createElement(IconListUnordered, null), mode: \"ghost\", isActive: editor.isActive('orderedList'), onClick: () => editor.chain().focus().toggleOrderedList().run(), disabled: disabled })),\r\n        React.createElement(ButtonIcon, { icon: React.createElement(IconExpand, null), mode: \"ghost\", disabled: disabled, onClick: () => setIsExpanded(!isExpanded) })));\r\n};\r\nexport const TextareaWYSIWYG = ({ placeholder = '', disabled = false, onBlur, onChange, name = '', value = '', }) => {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const editor = useEditor({\r\n        content: value,\r\n        editable: !disabled,\r\n        extensions: [\r\n            StarterKit,\r\n            Link,\r\n            Placeholder.configure({\r\n                placeholder,\r\n            }),\r\n        ],\r\n        onBlur: ({ editor }) => {\r\n            if (onBlur) {\r\n                onBlur(editor.getHTML());\r\n            }\r\n        },\r\n        onUpdate: ({ editor }) => {\r\n            if (onChange) {\r\n                onChange(editor.getHTML());\r\n            }\r\n        },\r\n    }, [disabled]);\r\n    const body = document.querySelector('body');\r\n    if (isExpanded) {\r\n        document.onkeydown = e => {\r\n            if (e.key === 'Escape' && isExpanded) {\r\n                setIsExpanded(!isExpanded);\r\n            }\r\n        };\r\n        if (body) {\r\n            body.style.overflow = 'hidden';\r\n        }\r\n        let portalNode = document.querySelector('#fullscreen-editor');\r\n        if (!portalNode) {\r\n            const div = document.createElement('div');\r\n            div.id = 'fullscreen-editor';\r\n            document.body.appendChild(div);\r\n            portalNode = div;\r\n        }\r\n        const fullScreenEditor = (React.createElement(Container, { disabled: disabled, fullScreen: true },\r\n            React.createElement(MenuBar, { disabled: disabled, editor: editor, fullScreen: true, isExpanded: isExpanded, setIsExpanded: setIsExpanded }),\r\n            React.createElement(StyledEditorContent, { name: name, editor: editor })));\r\n        return ReactDOM.createPortal(fullScreenEditor, portalNode);\r\n    }\r\n    if (body) {\r\n        body.style.overflow = 'auto';\r\n    }\r\n    return (React.createElement(Container, { disabled: disabled },\r\n        React.createElement(MenuBar, { disabled: disabled, editor: editor, isExpanded: isExpanded, setIsExpanded: setIsExpanded }),\r\n        React.createElement(StyledEditorContent, { name: name, editor: editor })));\r\n};\r\nconst Container = styled.div.attrs(({ disabled, fullScreen = false }) => ({\r\n    className: `w-full text-ui-600 overflow-auto ${fullScreen\r\n        ? 'h-screen flex flex-col fixed top-0'\r\n        : 'rounded-xl border-2 border-ui-100 hover:border-ui-300 focus-within:ring-2 focus-within:ring-primary-500 active:border-primary-500 active:ring-0 '} ${disabled ? 'bg-ui-100 border-ui-200' : 'bg-white'}`,\r\n})) `\n  ::-webkit-input-placeholder {\n    color: #9aa5b1;\n  }\n  ::-moz-placeholder {\n    color: #9aa5b1;\n  }\n  :-ms-input-placeholder {\n    color: #9aa5b1;\n  }\n  :-moz-placeholder {\n    color: #9aa5b1;\n  }\n`;\r\nconst StyledMenuBar = styled.div.attrs(({ disabled, fullScreen }) => ({\r\n    className: `bg-ui-50 px-2 py-1.5 flex flex-wrap justify-between ${fullScreen ? 'sticky top-0 z-10' : 'rounded-t-xl'} ${disabled ? 'bg-ui-100' : ''}`,\r\n})) ``;\r\nconst Toolgroup = styled.div.attrs({\r\n    className: 'flex flex-wrap space-x-1.5',\r\n}) ``;\r\nconst StyledEditorContent = styled(EditorContent) `\n  flex: 1;\n\n  .ProseMirror {\n    padding: 12px 16px;\n    height: 100%;\n    min-height: 112px;\n\n    :focus {\n      outline: none;\n    }\n\n    ul {\n      list-style-type: decimal;\n      padding: 0 1rem;\n    }\n\n    ol {\n      list-style-type: disc;\n      padding: 0 1rem;\n    }\n\n    a {\n      color: #003bf5;\n      cursor: pointer;\n      font-weight: 700;\n\n      :hover {\n        color: #0031ad;\n      }\n    }\n  }\n\n  .ProseMirror p.is-editor-empty:first-child::before {\n    color: #adb5bd;\n    content: attr(data-placeholder);\n    float: left;\n    height: 0;\n    pointer-events: none;\n  }\n`;\r\n//# sourceMappingURL=wysiwyg.js.map","references":["/root/repo/chainlink-spring-hackathon/frontend/node_modules/@tiptap/extension-link/dist/packages/extension-link/src/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@tiptap/extension-placeholder/dist/packages/extension-placeholder/src/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@tiptap/react/dist/packages/react/src/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@tiptap/starter-kit/dist/packages/starter-kit/src/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@types/react/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@types/react-dom/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/node_modules/@types/styled-components/index.d.ts","/root/repo/chainlink-spring-hackathon/frontend/packages/ui-components/src/components/button/index.ts","/root/repo/chainlink-spring-hackathon/frontend/packages/ui-components/src/components/icons/index.tsx"],"map":"{\"version\":3,\"file\":\"wysiwyg.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/textarea/wysiwyg.tsx\"],\"names\":[],\"mappings\":\"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\"}"}
