{
  "version": 3,
  "sources": ["../../../../../node_modules/@elastic/apm-rum-core/node_modules/stackframe/stackframe.js", "../../../../../node_modules/@elastic/apm-rum-core/node_modules/error-stack-parser/error-stack-parser.js", "../../../../../node_modules/opentracing/src/constants.ts", "../../../../../node_modules/opentracing/src/span_context.ts", "../../../../../node_modules/opentracing/src/noop.ts", "../../../../../node_modules/opentracing/src/span.ts", "../../../../../node_modules/opentracing/src/reference.ts", "../../../../../node_modules/opentracing/src/functions.ts", "../../../../../node_modules/opentracing/src/tracer.ts", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/error-logging/stack-trace.js", "../../../../../node_modules/promise-polyfill/src/finally.js", "../../../../../node_modules/promise-polyfill/src/allSettled.js", "../../../../../node_modules/promise-polyfill/src/index.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/polyfills.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/utils.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/url.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/constants.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/context.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/truncate.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/error-logging/error-logging.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/queue.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/throttle.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/ndjson.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/patch-utils.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span-base.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/state.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/capture-navigation.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/compress.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/apm-server.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/event-handler.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/config-service.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/logging-service.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/service-factory.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/error-logging/index.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/xhr-patch.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/fetch-patch.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/history-patch.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/event-target-patch.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/patching/index.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/performance-monitoring.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/breakdown.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/metrics.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction-service.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/index.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/instrument.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/common/after-frame.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/bootstrap.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/opentracing/tracer.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/opentracing/span.js", "../../../../../node_modules/@elastic/apm-rum-core/dist/es/index.js", "../../../../../node_modules/@elastic/apm-rum/dist/es/apm-base.js", "../../../../../node_modules/@elastic/apm-rum/dist/es/index.js"],
  "sourcesContent": ["(function (root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function () {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function StackFrame(functionName, args, fileName, lineNumber, columnNumber, source) {\n        if (functionName !== undefined) {\n            this.setFunctionName(functionName);\n        }\n        if (args !== undefined) {\n            this.setArgs(args);\n        }\n        if (fileName !== undefined) {\n            this.setFileName(fileName);\n        }\n        if (lineNumber !== undefined) {\n            this.setLineNumber(lineNumber);\n        }\n        if (columnNumber !== undefined) {\n            this.setColumnNumber(columnNumber);\n        }\n        if (source !== undefined) {\n            this.setSource(source);\n        }\n    }\n\n    StackFrame.prototype = {\n        getFunctionName: function () {\n            return this.functionName;\n        },\n        setFunctionName: function (v) {\n            this.functionName = String(v);\n        },\n\n        getArgs: function () {\n            return this.args;\n        },\n        setArgs: function (v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        // NOTE: Property name may be misleading as it includes the path,\n        // but it somewhat mirrors V8's JavaScriptStackTraceApi\n        // https://code.google.com/p/v8/wiki/JavaScriptStackTraceApi and Gecko's\n        // http://mxr.mozilla.org/mozilla-central/source/xpcom/base/nsIException.idl#14\n        getFileName: function () {\n            return this.fileName;\n        },\n        setFileName: function (v) {\n            this.fileName = String(v);\n        },\n\n        getLineNumber: function () {\n            return this.lineNumber;\n        },\n        setLineNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Line Number must be a Number');\n            }\n            this.lineNumber = Number(v);\n        },\n\n        getColumnNumber: function () {\n            return this.columnNumber;\n        },\n        setColumnNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Column Number must be a Number');\n            }\n            this.columnNumber = Number(v);\n        },\n\n        getSource: function () {\n            return this.source;\n        },\n        setSource: function (v) {\n            this.source = String(v);\n        },\n\n        toString: function() {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    return StackFrame;\n}));\n", "(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    function _map(array, fn, thisArg) {\n        if (typeof Array.prototype.map === 'function') {\n            return array.map(fn, thisArg);\n        } else {\n            var output = new Array(array.length);\n            for (var i = 0; i < array.length; i++) {\n                output[i] = fn.call(thisArg, array[i]);\n            }\n            return output;\n        }\n    }\n\n    function _filter(array, fn, thisArg) {\n        if (typeof Array.prototype.filter === 'function') {\n            return array.filter(fn, thisArg);\n        } else {\n            var output = [];\n            for (var i = 0; i < array.length; i++) {\n                if (fn.call(thisArg, array[i])) {\n                    output.push(array[i]);\n                }\n            }\n            return output;\n        }\n    }\n\n    function _indexOf(array, target) {\n        if (typeof Array.prototype.indexOf === 'function') {\n            return array.indexOf(target);\n        } else {\n            for (var i = 0; i < array.length; i++) {\n                if (array[i] === target) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    }\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = _indexOf(['eval', '<anonymous>'], locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame(functionName, undefined, fileName, locationParts[1], locationParts[2], line);\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame(line);\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n                    return new StackFrame(functionName,\n                        undefined,\n                        locationParts[0],\n                        locationParts[1],\n                        locationParts[2],\n                        line);\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame(undefined, undefined, match[2], match[1], undefined, lines[i]));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame(\n                            match[3] || undefined,\n                            undefined,\n                            match[2],\n                            match[1],\n                            undefined,\n                            lines[i]\n                        )\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return _map(filtered, function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n                return new StackFrame(\n                    functionName,\n                    args,\n                    locationParts[0],\n                    locationParts[1],\n                    locationParts[2],\n                    line);\n            }, this);\n        }\n    };\n}));\n\n", null, null, null, null, null, null, null, "import stackParser from 'error-stack-parser';\n\nfunction filePathToFileName(fileUrl) {\n  var origin = window.location.origin || window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n  if (fileUrl.indexOf(origin) > -1) {\n    fileUrl = fileUrl.replace(origin + '/', '');\n  }\n\n  return fileUrl;\n}\n\nfunction cleanFilePath(filePath) {\n  if (filePath === void 0) {\n    filePath = '';\n  }\n\n  if (filePath === '<anonymous>') {\n    filePath = '';\n  }\n\n  return filePath;\n}\n\nfunction isFileInline(fileUrl) {\n  if (fileUrl) {\n    return window.location.href.indexOf(fileUrl) === 0;\n  }\n\n  return false;\n}\n\nfunction normalizeStackFrames(stackFrames) {\n  return stackFrames.map(function (frame) {\n    if (frame.functionName) {\n      frame.functionName = normalizeFunctionName(frame.functionName);\n    }\n\n    return frame;\n  });\n}\n\nfunction normalizeFunctionName(fnName) {\n  var parts = fnName.split('/');\n\n  if (parts.length > 1) {\n    fnName = ['Object', parts[parts.length - 1]].join('.');\n  } else {\n    fnName = parts[0];\n  }\n\n  fnName = fnName.replace(/.<$/gi, '.<anonymous>');\n  fnName = fnName.replace(/^Anonymous function$/, '<anonymous>');\n  parts = fnName.split('.');\n\n  if (parts.length > 1) {\n    fnName = parts[parts.length - 1];\n  } else {\n    fnName = parts[0];\n  }\n\n  return fnName;\n}\n\nexport function createStackTraces(errorEvent) {\n  var error = errorEvent.error,\n      filename = errorEvent.filename,\n      lineno = errorEvent.lineno,\n      colno = errorEvent.colno;\n  var stackTraces = [];\n\n  if (error) {\n    try {\n      stackTraces = stackParser.parse(error);\n    } catch (e) {}\n  }\n\n  if (stackTraces.length === 0) {\n    stackTraces = [{\n      fileName: filename,\n      lineNumber: lineno,\n      columnNumber: colno\n    }];\n  }\n\n  var normalizedStackTraces = normalizeStackFrames(stackTraces);\n  return normalizedStackTraces.map(function (stack) {\n    var fileName = stack.fileName,\n        lineNumber = stack.lineNumber,\n        columnNumber = stack.columnNumber,\n        _stack$functionName = stack.functionName,\n        functionName = _stack$functionName === void 0 ? '<anonymous>' : _stack$functionName;\n\n    if (!fileName && !lineNumber) {\n      return {};\n    }\n\n    if (!columnNumber && !lineNumber) {\n      return {};\n    }\n\n    var filePath = cleanFilePath(fileName);\n    var cleanedFileName = filePathToFileName(filePath);\n\n    if (isFileInline(filePath)) {\n      cleanedFileName = '(inline script)';\n    }\n\n    return {\n      abs_path: fileName,\n      filename: cleanedFileName,\n      function: functionName,\n      lineno: lineNumber,\n      colno: columnNumber\n    };\n  });\n}\nexport function filterInvalidFrames(frames) {\n  return frames.filter(function (_ref) {\n    var filename = _ref.filename,\n        lineno = _ref.lineno;\n    return typeof filename !== 'undefined' && typeof lineno !== 'undefined';\n  });\n}", "/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n", "function allSettled(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(\n        new TypeError(\n          typeof arr +\n            ' ' +\n            arr +\n            ' is not iterable(cannot read property Symbol(Symbol.iterator))'\n        )\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        var then = val.then;\n        if (typeof then === 'function') {\n          then.call(\n            val,\n            function(val) {\n              res(i, val);\n            },\n            function(e) {\n              args[i] = { status: 'rejected', reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            }\n          );\n          return;\n        }\n      }\n      args[i] = { status: 'fulfilled', value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\nexport default allSettled;\n", "import promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n// @ts-ignore\nvar setImmediateFunc = typeof setImmediate !== 'undefined' ? setImmediate : null;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.allSettled = allSettled;\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediateFunc === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediateFunc(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n", "import PromisePollyfill from 'promise-polyfill';\nimport { isBrowser } from './utils';\nvar local = {};\n\nif (isBrowser) {\n  local = window;\n} else if (typeof self !== 'undefined') {\n  local = self;\n}\n\nvar Promise = 'Promise' in local ? local.Promise : PromisePollyfill;\nexport { Promise };", "import { Promise } from './polyfills';\nvar slice = [].slice;\nvar isBrowser = typeof window !== 'undefined';\nvar PERF = isBrowser && typeof performance !== 'undefined' ? performance : {};\n\nfunction isCORSSupported() {\n  var xhr = new window.XMLHttpRequest();\n  return 'withCredentials' in xhr;\n}\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToHex(buffer) {\n  var hexOctets = [];\n\n  for (var _i = 0; _i < buffer.length; _i++) {\n    hexOctets.push(byteToHex[buffer[_i]]);\n  }\n\n  return hexOctets.join('');\n}\n\nvar destination = new Uint8Array(16);\n\nfunction rng() {\n  if (typeof crypto != 'undefined' && typeof crypto.getRandomValues == 'function') {\n    return crypto.getRandomValues(destination);\n  } else if (typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function') {\n    return msCrypto.getRandomValues(destination);\n  }\n\n  return destination;\n}\n\nfunction generateRandomId(length) {\n  var id = bytesToHex(rng());\n  return id.substr(0, length);\n}\n\nfunction getDtHeaderValue(span) {\n  var dtVersion = '00';\n  var dtUnSampledFlags = '00';\n  var dtSampledFlags = '01';\n\n  if (span && span.traceId && span.id && span.parentId) {\n    var flags = span.sampled ? dtSampledFlags : dtUnSampledFlags;\n    var id = span.sampled ? span.id : span.parentId;\n    return dtVersion + '-' + span.traceId + '-' + id + '-' + flags;\n  }\n}\n\nfunction parseDtHeaderValue(value) {\n  var parsed = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})$/.exec(value);\n\n  if (parsed) {\n    var flags = parsed[4];\n    var sampled = flags !== '00';\n    return {\n      traceId: parsed[2],\n      id: parsed[3],\n      sampled: sampled\n    };\n  }\n}\n\nfunction isDtHeaderValid(header) {\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(header) && header.slice(3, 35) !== '00000000000000000000000000000000' && header.slice(36, 52) !== '0000000000000000';\n}\n\nfunction getTSHeaderValue(_ref) {\n  var sampleRate = _ref.sampleRate;\n\n  if (typeof sampleRate !== 'number' || String(sampleRate).length > 256) {\n    return;\n  }\n\n  var NAMESPACE = 'es';\n  var SEPARATOR = '=';\n  return \"\" + NAMESPACE + SEPARATOR + \"s:\" + sampleRate;\n}\n\nfunction setRequestHeader(target, name, value) {\n  if (typeof target.setRequestHeader === 'function') {\n    target.setRequestHeader(name, value);\n  } else if (target.headers && typeof target.headers.append === 'function') {\n    target.headers.append(name, value);\n  } else {\n    target[name] = value;\n  }\n}\n\nfunction checkSameOrigin(source, target) {\n  var isSame = false;\n\n  if (typeof target === 'string') {\n    isSame = source === target;\n  } else if (target && typeof target.test === 'function') {\n    isSame = target.test(source);\n  } else if (Array.isArray(target)) {\n    target.forEach(function (t) {\n      if (!isSame) {\n        isSame = checkSameOrigin(source, t);\n      }\n    });\n  }\n\n  return isSame;\n}\n\nfunction isPlatformSupported() {\n  return isBrowser && typeof Set === 'function' && typeof JSON.stringify === 'function' && PERF && typeof PERF.now === 'function' && isCORSSupported();\n}\n\nfunction setLabel(key, value, obj) {\n  if (!obj || !key) return;\n  var skey = removeInvalidChars(key);\n  var valueType = typeof value;\n\n  if (value != undefined && valueType !== 'boolean' && valueType !== 'number') {\n    value = String(value);\n  }\n\n  obj[skey] = value;\n  return obj;\n}\n\nfunction getServerTimingInfo(serverTimingEntries) {\n  if (serverTimingEntries === void 0) {\n    serverTimingEntries = [];\n  }\n\n  var serverTimingInfo = [];\n  var entrySeparator = ', ';\n  var valueSeparator = ';';\n\n  for (var _i2 = 0; _i2 < serverTimingEntries.length; _i2++) {\n    var _serverTimingEntries$ = serverTimingEntries[_i2],\n        name = _serverTimingEntries$.name,\n        duration = _serverTimingEntries$.duration,\n        description = _serverTimingEntries$.description;\n    var timingValue = name;\n\n    if (description) {\n      timingValue += valueSeparator + 'desc=' + description;\n    }\n\n    if (duration) {\n      timingValue += valueSeparator + 'dur=' + duration;\n    }\n\n    serverTimingInfo.push(timingValue);\n  }\n\n  return serverTimingInfo.join(entrySeparator);\n}\n\nfunction getTimeOrigin() {\n  return PERF.timing.fetchStart;\n}\n\nfunction stripQueryStringFromUrl(url) {\n  return url && url.split('?')[0];\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction baseExtend(dst, objs, deep) {\n  for (var i = 0, ii = objs.length; i < ii; ++i) {\n    var obj = objs[i];\n    if (!isObject(obj) && !isFunction(obj)) continue;\n    var keys = Object.keys(obj);\n\n    for (var j = 0, jj = keys.length; j < jj; j++) {\n      var key = keys[j];\n      var src = obj[key];\n\n      if (deep && isObject(src)) {\n        if (!isObject(dst[key])) dst[key] = Array.isArray(src) ? [] : {};\n        baseExtend(dst[key], [src], false);\n      } else {\n        dst[key] = src;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction getElasticScript() {\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0, l = scripts.length; i < l; i++) {\n      var sc = scripts[i];\n\n      if (sc.src.indexOf('elastic') > 0) {\n        return sc;\n      }\n    }\n  }\n}\n\nfunction getCurrentScript() {\n  if (typeof document !== 'undefined') {\n    var currentScript = document.currentScript;\n\n    if (!currentScript) {\n      return getElasticScript();\n    }\n\n    return currentScript;\n  }\n}\n\nfunction extend(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), false);\n}\n\nfunction merge(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), true);\n}\n\nfunction isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\nfunction noop() {}\n\nfunction find(array, predicate, thisArg) {\n  if (array == null) {\n    throw new TypeError('array is null or not defined');\n  }\n\n  var o = Object(array);\n  var len = o.length >>> 0;\n\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate must be a function');\n  }\n\n  var k = 0;\n\n  while (k < len) {\n    var kValue = o[k];\n\n    if (predicate.call(thisArg, kValue, k, o)) {\n      return kValue;\n    }\n\n    k++;\n  }\n\n  return undefined;\n}\n\nfunction removeInvalidChars(key) {\n  return key.replace(/[.*\"]/g, '_');\n}\n\nfunction getLatestNonXHRSpan(spans) {\n  var latestSpan = null;\n\n  for (var _i3 = 0; _i3 < spans.length; _i3++) {\n    var span = spans[_i3];\n\n    if (String(span.type).indexOf('external') === -1 && (!latestSpan || latestSpan._end < span._end)) {\n      latestSpan = span;\n    }\n  }\n\n  return latestSpan;\n}\n\nfunction getEarliestSpan(spans) {\n  var earliestSpan = spans[0];\n\n  for (var _i4 = 1; _i4 < spans.length; _i4++) {\n    var span = spans[_i4];\n\n    if (earliestSpan._start > span._start) {\n      earliestSpan = span;\n    }\n  }\n\n  return earliestSpan;\n}\n\nfunction now() {\n  return PERF.now();\n}\n\nfunction getTime(time) {\n  return typeof time === 'number' && time >= 0 ? time : now();\n}\n\nfunction getDuration(start, end) {\n  if (isUndefined(end) || isUndefined(start)) {\n    return null;\n  }\n\n  return parseInt(end - start);\n}\n\nfunction scheduleMacroTask(callback) {\n  setTimeout(callback, 0);\n}\n\nfunction scheduleMicroTask(callback) {\n  Promise.resolve().then(callback);\n}\n\nfunction isPerfTimelineSupported() {\n  return typeof PERF.getEntriesByType === 'function';\n}\n\nfunction isPerfTypeSupported(type) {\n  return typeof PerformanceObserver !== 'undefined' && PerformanceObserver.supportedEntryTypes && PerformanceObserver.supportedEntryTypes.indexOf(type) >= 0;\n}\n\nexport { extend, merge, isUndefined, noop, baseExtend, bytesToHex, isCORSSupported, isObject, isFunction, isPlatformSupported, isDtHeaderValid, parseDtHeaderValue, getServerTimingInfo, getDtHeaderValue, getTSHeaderValue, getCurrentScript, getElasticScript, getTimeOrigin, generateRandomId, getEarliestSpan, getLatestNonXHRSpan, getDuration, getTime, now, rng, checkSameOrigin, scheduleMacroTask, scheduleMicroTask, setLabel, setRequestHeader, stripQueryStringFromUrl, find, removeInvalidChars, PERF, isPerfTimelineSupported, isBrowser, isPerfTypeSupported };", "import { isBrowser } from './utils';\n\nfunction isDefaultPort(port, protocol) {\n  switch (protocol) {\n    case 'http:':\n      return port === '80';\n\n    case 'https:':\n      return port === '443';\n  }\n\n  return true;\n}\n\nvar RULES = [['#', 'hash'], ['?', 'query'], ['/', 'path'], ['@', 'auth', 1], [NaN, 'host', undefined, 1]];\nvar PROTOCOL_REGEX = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i;\nexport var Url = function () {\n  function Url(url) {\n    var _this$extractProtocol = this.extractProtocol(url || ''),\n        protocol = _this$extractProtocol.protocol,\n        address = _this$extractProtocol.address,\n        slashes = _this$extractProtocol.slashes;\n\n    var relative = !protocol && !slashes;\n    var location = this.getLocation();\n    var instructions = RULES.slice();\n    address = address.replace('\\\\', '/');\n\n    if (!slashes) {\n      instructions[2] = [NaN, 'path'];\n    }\n\n    var index;\n\n    for (var i = 0; i < instructions.length; i++) {\n      var instruction = instructions[i];\n      var parse = instruction[0];\n      var key = instruction[1];\n\n      if (typeof parse === 'string') {\n        index = address.indexOf(parse);\n\n        if (~index) {\n          var instLength = instruction[2];\n\n          if (instLength) {\n            var newIndex = address.lastIndexOf(parse);\n            index = Math.max(index, newIndex);\n            this[key] = address.slice(0, index);\n            address = address.slice(index + instLength);\n          } else {\n            this[key] = address.slice(index);\n            address = address.slice(0, index);\n          }\n        }\n      } else {\n        this[key] = address;\n        address = '';\n      }\n\n      this[key] = this[key] || (relative && instruction[3] ? location[key] || '' : '');\n      if (instruction[3]) this[key] = this[key].toLowerCase();\n    }\n\n    if (relative && this.path.charAt(0) !== '/') {\n      this.path = '/' + this.path;\n    }\n\n    this.relative = relative;\n    this.protocol = protocol || location.protocol;\n    this.hostname = this.host;\n    this.port = '';\n\n    if (/:\\d+$/.test(this.host)) {\n      var value = this.host.split(':');\n      var port = value.pop();\n      var hostname = value.join(':');\n\n      if (isDefaultPort(port, this.protocol)) {\n        this.host = hostname;\n      } else {\n        this.port = port;\n      }\n\n      this.hostname = hostname;\n    }\n\n    this.origin = this.protocol && this.host && this.protocol !== 'file:' ? this.protocol + '//' + this.host : 'null';\n    this.href = this.toString();\n  }\n\n  var _proto = Url.prototype;\n\n  _proto.toString = function toString() {\n    var result = this.protocol;\n    result += '//';\n\n    if (this.auth) {\n      var REDACTED = '[REDACTED]';\n      var userpass = this.auth.split(':');\n      var username = userpass[0] ? REDACTED : '';\n      var password = userpass[1] ? ':' + REDACTED : '';\n      result += username + password + '@';\n    }\n\n    result += this.host;\n    result += this.path;\n    result += this.query;\n    result += this.hash;\n    return result;\n  };\n\n  _proto.getLocation = function getLocation() {\n    var globalVar = {};\n\n    if (isBrowser) {\n      globalVar = window;\n    }\n\n    return globalVar.location;\n  };\n\n  _proto.extractProtocol = function extractProtocol(url) {\n    var match = PROTOCOL_REGEX.exec(url);\n    return {\n      protocol: match[1] ? match[1].toLowerCase() : '',\n      slashes: !!match[2],\n      address: match[3]\n    };\n  };\n\n  return Url;\n}();\nexport function slugifyUrl(urlStr, depth) {\n  if (depth === void 0) {\n    depth = 2;\n  }\n\n  var parsedUrl = new Url(urlStr);\n  var query = parsedUrl.query,\n      path = parsedUrl.path;\n  var pathParts = path.substring(1).split('/');\n  var redactString = ':id';\n  var wildcard = '*';\n  var specialCharsRegex = /\\W|_/g;\n  var digitsRegex = /[0-9]/g;\n  var lowerCaseRegex = /[a-z]/g;\n  var upperCaseRegex = /[A-Z]/g;\n  var redactedParts = [];\n  var redactedBefore = false;\n\n  for (var index = 0; index < pathParts.length; index++) {\n    var part = pathParts[index];\n\n    if (redactedBefore || index > depth - 1) {\n      if (part) {\n        redactedParts.push(wildcard);\n      }\n\n      break;\n    }\n\n    var numberOfSpecialChars = (part.match(specialCharsRegex) || []).length;\n\n    if (numberOfSpecialChars >= 2) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberOfDigits = (part.match(digitsRegex) || []).length;\n\n    if (numberOfDigits > 3 || part.length > 3 && numberOfDigits / part.length >= 0.3) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberofUpperCase = (part.match(upperCaseRegex) || []).length;\n    var numberofLowerCase = (part.match(lowerCaseRegex) || []).length;\n    var lowerCaseRate = numberofLowerCase / part.length;\n    var upperCaseRate = numberofUpperCase / part.length;\n\n    if (part.length > 5 && (upperCaseRate > 0.3 && upperCaseRate < 0.6 || lowerCaseRate > 0.3 && lowerCaseRate < 0.6)) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    part && redactedParts.push(part);\n  }\n\n  var redacted = '/' + (redactedParts.length >= 2 ? redactedParts.join('/') : redactedParts.join('')) + (query ? '?{query}' : '');\n  return redacted;\n}", "var SCHEDULE = 'schedule';\nvar INVOKE = 'invoke';\nvar ADD_EVENT_LISTENER_STR = 'addEventListener';\nvar REMOVE_EVENT_LISTENER_STR = 'removeEventListener';\nvar RESOURCE_INITIATOR_TYPES = ['link', 'css', 'script', 'img', 'xmlhttprequest', 'fetch', 'beacon', 'iframe'];\nvar REUSABILITY_THRESHOLD = 5000;\nvar MAX_SPAN_DURATION = 5 * 60 * 1000;\nvar PAGE_LOAD = 'page-load';\nvar ROUTE_CHANGE = 'route-change';\nvar TYPE_CUSTOM = 'custom';\nvar USER_INTERACTION = 'user-interaction';\nvar HTTP_REQUEST_TYPE = 'http-request';\nvar TEMPORARY_TYPE = 'temporary';\nvar NAME_UNKNOWN = 'Unknown';\nvar TRANSACTION_TYPE_ORDER = [PAGE_LOAD, ROUTE_CHANGE, USER_INTERACTION, HTTP_REQUEST_TYPE, TYPE_CUSTOM, TEMPORARY_TYPE];\nvar OUTCOME_SUCCESS = 'success';\nvar OUTCOME_FAILURE = 'failure';\nvar USER_TIMING_THRESHOLD = 60;\nvar TRANSACTION_START = 'transaction:start';\nvar TRANSACTION_END = 'transaction:end';\nvar CONFIG_CHANGE = 'config:change';\nvar XMLHTTPREQUEST = 'xmlhttprequest';\nvar FETCH = 'fetch';\nvar HISTORY = 'history';\nvar EVENT_TARGET = 'eventtarget';\nvar ERROR = 'error';\nvar BEFORE_EVENT = ':before';\nvar AFTER_EVENT = ':after';\nvar LOCAL_CONFIG_KEY = 'elastic_apm_config';\nvar LONG_TASK = 'longtask';\nvar PAINT = 'paint';\nvar MEASURE = 'measure';\nvar NAVIGATION = 'navigation';\nvar RESOURCE = 'resource';\nvar FIRST_CONTENTFUL_PAINT = 'first-contentful-paint';\nvar LARGEST_CONTENTFUL_PAINT = 'largest-contentful-paint';\nvar FIRST_INPUT = 'first-input';\nvar LAYOUT_SHIFT = 'layout-shift';\nvar ERRORS = 'errors';\nvar TRANSACTIONS = 'transactions';\nvar CONFIG_SERVICE = 'ConfigService';\nvar LOGGING_SERVICE = 'LoggingService';\nvar APM_SERVER = 'ApmServer';\nvar TRUNCATED_TYPE = '.truncated';\nvar KEYWORD_LIMIT = 1024;\nvar SESSION_TIMEOUT = 30 * 60000;\nexport { SCHEDULE, INVOKE, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, RESOURCE_INITIATOR_TYPES, REUSABILITY_THRESHOLD, MAX_SPAN_DURATION, PAGE_LOAD, ROUTE_CHANGE, NAME_UNKNOWN, TYPE_CUSTOM, USER_TIMING_THRESHOLD, TRANSACTION_START, TRANSACTION_END, CONFIG_CHANGE, XMLHTTPREQUEST, FETCH, HISTORY, EVENT_TARGET, ERROR, BEFORE_EVENT, AFTER_EVENT, LOCAL_CONFIG_KEY, HTTP_REQUEST_TYPE, LONG_TASK, PAINT, MEASURE, NAVIGATION, RESOURCE, FIRST_CONTENTFUL_PAINT, LARGEST_CONTENTFUL_PAINT, KEYWORD_LIMIT, TEMPORARY_TYPE, USER_INTERACTION, TRANSACTION_TYPE_ORDER, ERRORS, TRANSACTIONS, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER, TRUNCATED_TYPE, FIRST_INPUT, LAYOUT_SHIFT, OUTCOME_SUCCESS, OUTCOME_FAILURE, SESSION_TIMEOUT };", "var _excluded = [\"tags\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { Url } from './url';\nimport { PAGE_LOAD, NAVIGATION } from './constants';\nimport { getServerTimingInfo, PERF, isPerfTimelineSupported } from './utils';\nvar LEFT_SQUARE_BRACKET = 91;\nvar RIGHT_SQUARE_BRACKET = 93;\nvar EXTERNAL = 'external';\nvar RESOURCE = 'resource';\nvar HARD_NAVIGATION = 'hard-navigation';\n\nfunction getPortNumber(port, protocol) {\n  if (port === '') {\n    port = protocol === 'http:' ? '80' : protocol === 'https:' ? '443' : '';\n  }\n\n  return port;\n}\n\nfunction getResponseContext(perfTimingEntry) {\n  var transferSize = perfTimingEntry.transferSize,\n      encodedBodySize = perfTimingEntry.encodedBodySize,\n      decodedBodySize = perfTimingEntry.decodedBodySize,\n      serverTiming = perfTimingEntry.serverTiming;\n  var respContext = {\n    transfer_size: transferSize,\n    encoded_body_size: encodedBodySize,\n    decoded_body_size: decodedBodySize\n  };\n  var serverTimingStr = getServerTimingInfo(serverTiming);\n\n  if (serverTimingStr) {\n    respContext.headers = {\n      'server-timing': serverTimingStr\n    };\n  }\n\n  return respContext;\n}\n\nfunction getDestination(parsedUrl, type) {\n  var port = parsedUrl.port,\n      protocol = parsedUrl.protocol,\n      hostname = parsedUrl.hostname,\n      host = parsedUrl.host;\n  var portNumber = getPortNumber(port, protocol);\n  var ipv6Hostname = hostname.charCodeAt(0) === LEFT_SQUARE_BRACKET && hostname.charCodeAt(hostname.length - 1) === RIGHT_SQUARE_BRACKET;\n  var address = hostname;\n\n  if (ipv6Hostname) {\n    address = hostname.slice(1, -1);\n  }\n\n  return {\n    service: {\n      name: protocol + '//' + host,\n      resource: hostname + ':' + portNumber,\n      type: type\n    },\n    address: address,\n    port: Number(portNumber)\n  };\n}\n\nfunction getResourceContext(data) {\n  var entry = data.entry,\n      url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, RESOURCE);\n  return {\n    http: {\n      url: url,\n      response: getResponseContext(entry)\n    },\n    destination: destination\n  };\n}\n\nfunction getExternalContext(data) {\n  var url = data.url,\n      method = data.method,\n      target = data.target,\n      response = data.response;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, EXTERNAL);\n  var context = {\n    http: {\n      method: method,\n      url: parsedUrl.href\n    },\n    destination: destination\n  };\n  var statusCode;\n\n  if (target && typeof target.status !== 'undefined') {\n    statusCode = target.status;\n  } else if (response) {\n    statusCode = response.status;\n  }\n\n  context.http.status_code = statusCode;\n  return context;\n}\n\nfunction getNavigationContext(data) {\n  var url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, HARD_NAVIGATION);\n  return {\n    destination: destination\n  };\n}\n\nexport function getPageContext() {\n  return {\n    page: {\n      referer: document.referrer,\n      url: location.href\n    }\n  };\n}\nexport function addSpanContext(span, data) {\n  if (!data) {\n    return;\n  }\n\n  var type = span.type;\n  var context;\n\n  switch (type) {\n    case EXTERNAL:\n      context = getExternalContext(data);\n      break;\n\n    case RESOURCE:\n      context = getResourceContext(data);\n      break;\n\n    case HARD_NAVIGATION:\n      context = getNavigationContext(data);\n      break;\n  }\n\n  span.addContext(context);\n}\nexport function addTransactionContext(transaction, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      tags = _ref.tags,\n      configContext = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var pageContext = getPageContext();\n  var responseContext = {};\n\n  if (transaction.type === PAGE_LOAD && isPerfTimelineSupported()) {\n    var entries = PERF.getEntriesByType(NAVIGATION);\n\n    if (entries && entries.length > 0) {\n      responseContext = {\n        response: getResponseContext(entries[0])\n      };\n    }\n  }\n\n  transaction.addContext(pageContext, responseContext, configContext);\n}", "import { KEYWORD_LIMIT } from './constants';\nvar METADATA_MODEL = {\n  service: {\n    name: [KEYWORD_LIMIT, true],\n    version: true,\n    agent: {\n      version: [KEYWORD_LIMIT, true]\n    },\n    environment: true\n  },\n  labels: {\n    '*': true\n  }\n};\nvar RESPONSE_MODEL = {\n  '*': true,\n  headers: {\n    '*': true\n  }\n};\nvar DESTINATION_MODEL = {\n  address: [KEYWORD_LIMIT],\n  service: {\n    '*': [KEYWORD_LIMIT, true]\n  }\n};\nvar CONTEXT_MODEL = {\n  user: {\n    id: true,\n    email: true,\n    username: true\n  },\n  tags: {\n    '*': true\n  },\n  http: {\n    response: RESPONSE_MODEL\n  },\n  destination: DESTINATION_MODEL,\n  response: RESPONSE_MODEL\n};\nvar SPAN_MODEL = {\n  name: [KEYWORD_LIMIT, true],\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  parent_id: [KEYWORD_LIMIT, true],\n  transaction_id: [KEYWORD_LIMIT, true],\n  subtype: true,\n  action: true,\n  context: CONTEXT_MODEL\n};\nvar TRANSACTION_MODEL = {\n  name: true,\n  parent_id: true,\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  span_count: {\n    started: [KEYWORD_LIMIT, true]\n  },\n  context: CONTEXT_MODEL\n};\nvar ERROR_MODEL = {\n  id: [KEYWORD_LIMIT, true],\n  trace_id: true,\n  transaction_id: true,\n  parent_id: true,\n  culprit: true,\n  exception: {\n    type: true\n  },\n  transaction: {\n    type: true\n  },\n  context: CONTEXT_MODEL\n};\n\nfunction truncate(value, limit, required, placeholder) {\n  if (limit === void 0) {\n    limit = KEYWORD_LIMIT;\n  }\n\n  if (required === void 0) {\n    required = false;\n  }\n\n  if (placeholder === void 0) {\n    placeholder = 'N/A';\n  }\n\n  if (required && isEmpty(value)) {\n    value = placeholder;\n  }\n\n  if (typeof value === 'string') {\n    return value.substring(0, limit);\n  }\n\n  return value;\n}\n\nfunction isEmpty(value) {\n  return value == null || value === '' || typeof value === 'undefined';\n}\n\nfunction replaceValue(target, key, currModel) {\n  var value = truncate(target[key], currModel[0], currModel[1]);\n\n  if (isEmpty(value)) {\n    delete target[key];\n    return;\n  }\n\n  target[key] = value;\n}\n\nfunction truncateModel(model, target, childTarget) {\n  if (model === void 0) {\n    model = {};\n  }\n\n  if (childTarget === void 0) {\n    childTarget = target;\n  }\n\n  var keys = Object.keys(model);\n  var emptyArr = [];\n\n  var _loop = function _loop(i) {\n    var currKey = keys[i];\n    var currModel = model[currKey] === true ? emptyArr : model[currKey];\n\n    if (!Array.isArray(currModel)) {\n      truncateModel(currModel, target, childTarget[currKey]);\n    } else {\n      if (currKey === '*') {\n        Object.keys(childTarget).forEach(function (key) {\n          return replaceValue(childTarget, key, currModel);\n        });\n      } else {\n        replaceValue(childTarget, currKey, currModel);\n      }\n    }\n  };\n\n  for (var i = 0; i < keys.length; i++) {\n    _loop(i);\n  }\n\n  return target;\n}\n\nexport { truncate, truncateModel, SPAN_MODEL, TRANSACTION_MODEL, ERROR_MODEL, METADATA_MODEL, RESPONSE_MODEL };", "var _excluded = [\"tags\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { createStackTraces, filterInvalidFrames } from './stack-trace';\nimport { generateRandomId, merge, extend } from '../common/utils';\nimport { getPageContext } from '../common/context';\nimport { truncateModel, ERROR_MODEL } from '../common/truncate';\nvar IGNORE_KEYS = ['stack', 'message'];\n\nfunction getErrorProperties(error) {\n  var propertyFound = false;\n  var properties = {};\n  Object.keys(error).forEach(function (key) {\n    if (IGNORE_KEYS.indexOf(key) >= 0) {\n      return;\n    }\n\n    var val = error[key];\n\n    if (val == null || typeof val === 'function') {\n      return;\n    }\n\n    if (typeof val === 'object') {\n      if (typeof val.toISOString !== 'function') return;\n      val = val.toISOString();\n    }\n\n    properties[key] = val;\n    propertyFound = true;\n  });\n\n  if (propertyFound) {\n    return properties;\n  }\n}\n\nvar ErrorLogging = function () {\n  function ErrorLogging(apmServer, configService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = ErrorLogging.prototype;\n\n  _proto.createErrorDataModel = function createErrorDataModel(errorEvent) {\n    var frames = createStackTraces(errorEvent);\n    var filteredFrames = filterInvalidFrames(frames);\n    var culprit = '(inline script)';\n    var lastFrame = filteredFrames[filteredFrames.length - 1];\n\n    if (lastFrame && lastFrame.filename) {\n      culprit = lastFrame.filename;\n    }\n\n    var message = errorEvent.message,\n        error = errorEvent.error;\n    var errorMessage = message;\n    var errorType = '';\n    var errorContext = {};\n\n    if (error && typeof error === 'object') {\n      errorMessage = errorMessage || error.message;\n      errorType = error.name;\n      var customProperties = getErrorProperties(error);\n\n      if (customProperties) {\n        errorContext.custom = customProperties;\n      }\n    }\n\n    if (!errorType) {\n      if (errorMessage && errorMessage.indexOf(':') > -1) {\n        errorType = errorMessage.split(':')[0];\n      }\n    }\n\n    var currentTransaction = this._transactionService.getCurrentTransaction();\n\n    var transactionContext = currentTransaction ? currentTransaction.context : {};\n\n    var _this$_configService$ = this._configService.get('context'),\n        tags = _this$_configService$.tags,\n        configContext = _objectWithoutPropertiesLoose(_this$_configService$, _excluded);\n\n    var pageContext = getPageContext();\n    var context = merge({}, pageContext, transactionContext, configContext, errorContext);\n    var errorObject = {\n      id: generateRandomId(),\n      culprit: culprit,\n      exception: {\n        message: errorMessage,\n        stacktrace: filteredFrames,\n        type: errorType\n      },\n      context: context\n    };\n\n    if (currentTransaction) {\n      errorObject = extend(errorObject, {\n        trace_id: currentTransaction.traceId,\n        parent_id: currentTransaction.id,\n        transaction_id: currentTransaction.id,\n        transaction: {\n          type: currentTransaction.type,\n          sampled: currentTransaction.sampled\n        }\n      });\n    }\n\n    return truncateModel(ERROR_MODEL, errorObject);\n  };\n\n  _proto.logErrorEvent = function logErrorEvent(errorEvent) {\n    if (typeof errorEvent === 'undefined') {\n      return;\n    }\n\n    var errorObject = this.createErrorDataModel(errorEvent);\n\n    if (typeof errorObject.exception.message === 'undefined') {\n      return;\n    }\n\n    this._apmServer.addError(errorObject);\n  };\n\n  _proto.registerListeners = function registerListeners() {\n    var _this = this;\n\n    window.addEventListener('error', function (errorEvent) {\n      return _this.logErrorEvent(errorEvent);\n    });\n    window.addEventListener('unhandledrejection', function (promiseRejectionEvent) {\n      return _this.logPromiseEvent(promiseRejectionEvent);\n    });\n  };\n\n  _proto.logPromiseEvent = function logPromiseEvent(promiseRejectionEvent) {\n    var prefix = 'Unhandled promise rejection: ';\n    var reason = promiseRejectionEvent.reason;\n\n    if (reason == null) {\n      reason = '<no reason specified>';\n    }\n\n    var errorEvent;\n\n    if (typeof reason.message === 'string') {\n      var name = reason.name ? reason.name + ': ' : '';\n      errorEvent = {\n        error: reason,\n        message: prefix + name + reason.message\n      };\n    } else {\n      reason = typeof reason === 'object' ? '<object>' : typeof reason === 'function' ? '<function>' : reason;\n      errorEvent = {\n        message: prefix + reason\n      };\n    }\n\n    this.logErrorEvent(errorEvent);\n  };\n\n  _proto.logError = function logError(messageOrError) {\n    var errorEvent = {};\n\n    if (typeof messageOrError === 'string') {\n      errorEvent.message = messageOrError;\n    } else {\n      errorEvent.error = messageOrError;\n    }\n\n    return this.logErrorEvent(errorEvent);\n  };\n\n  return ErrorLogging;\n}();\n\nexport default ErrorLogging;", "var Queue = function () {\n  function Queue(onFlush, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    this.onFlush = onFlush;\n    this.items = [];\n    this.queueLimit = opts.queueLimit || -1;\n    this.flushInterval = opts.flushInterval || 0;\n    this.timeoutId = undefined;\n  }\n\n  var _proto = Queue.prototype;\n\n  _proto._setTimer = function _setTimer() {\n    var _this = this;\n\n    this.timeoutId = setTimeout(function () {\n      return _this.flush();\n    }, this.flushInterval);\n  };\n\n  _proto._clear = function _clear() {\n    if (typeof this.timeoutId !== 'undefined') {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = undefined;\n    }\n\n    this.items = [];\n  };\n\n  _proto.flush = function flush() {\n    this.onFlush(this.items);\n\n    this._clear();\n  };\n\n  _proto.add = function add(item) {\n    this.items.push(item);\n\n    if (this.queueLimit !== -1 && this.items.length >= this.queueLimit) {\n      this.flush();\n    } else {\n      if (typeof this.timeoutId === 'undefined') {\n        this._setTimer();\n      }\n    }\n  };\n\n  return Queue;\n}();\n\nexport default Queue;", "export default function throttle(fn, onThrottle, opts) {\n  var context = this;\n  var limit = opts.limit;\n  var interval = opts.interval;\n  var counter = 0;\n  var timeoutId;\n  return function () {\n    counter++;\n\n    if (typeof timeoutId === 'undefined') {\n      timeoutId = setTimeout(function () {\n        counter = 0;\n        timeoutId = undefined;\n      }, interval);\n    }\n\n    if (counter > limit && typeof onThrottle === 'function') {\n      return onThrottle.apply(context, arguments);\n    } else {\n      return fn.apply(context, arguments);\n    }\n  };\n}", "var NDJSON = function () {\n  function NDJSON() {}\n\n  NDJSON.stringify = function stringify(object) {\n    return JSON.stringify(object) + '\\n';\n  };\n\n  return NDJSON;\n}();\n\nexport default NDJSON;", "export var globalState = {\n  fetchInProgress: false\n};\nexport function apmSymbol(name) {\n  return '__apm_symbol__' + name;\n}\n\nfunction isPropertyWritable(propertyDesc) {\n  if (!propertyDesc) {\n    return true;\n  }\n\n  if (propertyDesc.writable === false) {\n    return false;\n  }\n\n  return !(typeof propertyDesc.get === 'function' && typeof propertyDesc.set === 'undefined');\n}\n\nfunction attachOriginToPatched(patched, original) {\n  patched[apmSymbol('OriginalDelegate')] = original;\n}\n\nexport function patchMethod(target, name, patchFn) {\n  var proto = target;\n\n  while (proto && !proto.hasOwnProperty(name)) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  if (!proto && target[name]) {\n    proto = target;\n  }\n\n  var delegateName = apmSymbol(name);\n  var delegate;\n\n  if (proto && !(delegate = proto[delegateName])) {\n    delegate = proto[delegateName] = proto[name];\n    var desc = proto && Object.getOwnPropertyDescriptor(proto, name);\n\n    if (isPropertyWritable(desc)) {\n      var patchDelegate = patchFn(delegate, delegateName, name);\n\n      proto[name] = function () {\n        return patchDelegate(this, arguments);\n      };\n\n      attachOriginToPatched(proto[name], delegate);\n    }\n  }\n\n  return delegate;\n}\nexport var XHR_IGNORE = apmSymbol('xhrIgnore');\nexport var XHR_SYNC = apmSymbol('xhrSync');\nexport var XHR_URL = apmSymbol('xhrURL');\nexport var XHR_METHOD = apmSymbol('xhrMethod');", "import { generateRandomId, setLabel, merge, getDuration, getTime } from '../common/utils';\nimport { NAME_UNKNOWN, TYPE_CUSTOM } from '../common/constants';\n\nvar SpanBase = function () {\n  function SpanBase(name, type, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!name) {\n      name = NAME_UNKNOWN;\n    }\n\n    if (!type) {\n      type = TYPE_CUSTOM;\n    }\n\n    this.name = name;\n    this.type = type;\n    this.options = options;\n    this.id = options.id || generateRandomId(16);\n    this.traceId = options.traceId;\n    this.sampled = options.sampled;\n    this.sampleRate = options.sampleRate;\n    this.timestamp = options.timestamp;\n    this._start = getTime(options.startTime);\n    this._end = undefined;\n    this.ended = false;\n    this.outcome = undefined;\n    this.onEnd = options.onEnd;\n  }\n\n  var _proto = SpanBase.prototype;\n\n  _proto.ensureContext = function ensureContext() {\n    if (!this.context) {\n      this.context = {};\n    }\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    this.ensureContext();\n    var ctx = this.context;\n\n    if (!ctx.tags) {\n      ctx.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], ctx.tags);\n    });\n  };\n\n  _proto.addContext = function addContext() {\n    for (var _len = arguments.length, context = new Array(_len), _key = 0; _key < _len; _key++) {\n      context[_key] = arguments[_key];\n    }\n\n    if (context.length === 0) return;\n    this.ensureContext();\n    merge.apply(void 0, [this.context].concat(context));\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n    this.callOnEnd();\n  };\n\n  _proto.callOnEnd = function callOnEnd() {\n    if (typeof this.onEnd === 'function') {\n      this.onEnd(this);\n    }\n  };\n\n  _proto.duration = function duration() {\n    return getDuration(this._start, this._end);\n  };\n\n  return SpanBase;\n}();\n\nexport default SpanBase;", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport SpanBase from './span-base';\nimport { addSpanContext } from '../common/context';\n\nvar Span = function (_SpanBase) {\n  _inheritsLoose(Span, _SpanBase);\n\n  function Span(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.parentId = _this.options.parentId;\n    _this.subtype = undefined;\n    _this.action = undefined;\n\n    if (_this.type.indexOf('.') !== -1) {\n      var fields = _this.type.split('.', 3);\n\n      _this.type = fields[0];\n      _this.subtype = fields[1];\n      _this.action = fields[2];\n    }\n\n    _this.sync = _this.options.sync;\n    return _this;\n  }\n\n  var _proto = Span.prototype;\n\n  _proto.end = function end(endTime, data) {\n    _SpanBase.prototype.end.call(this, endTime);\n\n    addSpanContext(this, data);\n  };\n\n  return Span;\n}(SpanBase);\n\nexport default Span;", "var __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar state = {\n  bootstrapTime: null,\n  lastHiddenStart: Number.MIN_SAFE_INTEGER\n};\nexport { __DEV__, state };", "import Span from './span';\nimport { RESOURCE_INITIATOR_TYPES, MAX_SPAN_DURATION, USER_TIMING_THRESHOLD, PAGE_LOAD, RESOURCE, MEASURE } from '../common/constants';\nimport { stripQueryStringFromUrl, PERF, isPerfTimelineSupported } from '../common/utils';\nimport { state } from '../state';\nvar eventPairs = [['domainLookupStart', 'domainLookupEnd', 'Domain lookup'], ['connectStart', 'connectEnd', 'Making a connection to the server'], ['requestStart', 'responseEnd', 'Requesting and receiving the document'], ['domLoading', 'domInteractive', 'Parsing the document, executing sync. scripts'], ['domContentLoadedEventStart', 'domContentLoadedEventEnd', 'Fire \"DOMContentLoaded\" event'], ['loadEventStart', 'loadEventEnd', 'Fire \"load\" event']];\n\nfunction shouldCreateSpan(start, end, trStart, trEnd, baseTime) {\n  if (baseTime === void 0) {\n    baseTime = 0;\n  }\n\n  return typeof start === 'number' && typeof end === 'number' && start >= baseTime && end > start && start - baseTime >= trStart && end - baseTime <= trEnd && end - start < MAX_SPAN_DURATION && start - baseTime < MAX_SPAN_DURATION && end - baseTime < MAX_SPAN_DURATION;\n}\n\nfunction createNavigationTimingSpans(timings, baseTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < eventPairs.length; i++) {\n    var start = timings[eventPairs[i][0]];\n    var end = timings[eventPairs[i][1]];\n\n    if (!shouldCreateSpan(start, end, trStart, trEnd, baseTime)) {\n      continue;\n    }\n\n    var span = new Span(eventPairs[i][2], 'hard-navigation.browser-timing');\n    var data = null;\n\n    if (eventPairs[i][0] === 'requestStart') {\n      span.pageResponse = true;\n      data = {\n        url: location.origin\n      };\n    }\n\n    span._start = start - baseTime;\n    span.end(end - baseTime, data);\n    spans.push(span);\n  }\n\n  return spans;\n}\n\nfunction createResourceTimingSpan(resourceTimingEntry) {\n  var name = resourceTimingEntry.name,\n      initiatorType = resourceTimingEntry.initiatorType,\n      startTime = resourceTimingEntry.startTime,\n      responseEnd = resourceTimingEntry.responseEnd;\n  var kind = 'resource';\n\n  if (initiatorType) {\n    kind += '.' + initiatorType;\n  }\n\n  var spanName = stripQueryStringFromUrl(name);\n  var span = new Span(spanName, kind);\n  span._start = startTime;\n  span.end(responseEnd, {\n    url: name,\n    entry: resourceTimingEntry\n  });\n  return span;\n}\n\nfunction isCapturedByPatching(resourceStartTime, requestPatchTime) {\n  return requestPatchTime != null && resourceStartTime > requestPatchTime;\n}\n\nfunction isIntakeAPIEndpoint(url) {\n  return /intake\\/v\\d+\\/rum\\/events/.test(url);\n}\n\nfunction createResourceTimingSpans(entries, requestPatchTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i = entries[i],\n        initiatorType = _entries$i.initiatorType,\n        name = _entries$i.name,\n        startTime = _entries$i.startTime,\n        responseEnd = _entries$i.responseEnd;\n\n    if (RESOURCE_INITIATOR_TYPES.indexOf(initiatorType) === -1 || name == null) {\n      continue;\n    }\n\n    if ((initiatorType === 'xmlhttprequest' || initiatorType === 'fetch') && (isIntakeAPIEndpoint(name) || isCapturedByPatching(startTime, requestPatchTime))) {\n      continue;\n    }\n\n    if (shouldCreateSpan(startTime, responseEnd, trStart, trEnd)) {\n      spans.push(createResourceTimingSpan(entries[i]));\n    }\n  }\n\n  return spans;\n}\n\nfunction createUserTimingSpans(entries, trStart, trEnd) {\n  var userTimingSpans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i2 = entries[i],\n        name = _entries$i2.name,\n        startTime = _entries$i2.startTime,\n        duration = _entries$i2.duration;\n    var end = startTime + duration;\n\n    if (duration <= USER_TIMING_THRESHOLD || !shouldCreateSpan(startTime, end, trStart, trEnd)) {\n      continue;\n    }\n\n    var kind = 'app';\n    var span = new Span(name, kind);\n    span._start = startTime;\n    span.end(end);\n    userTimingSpans.push(span);\n  }\n\n  return userTimingSpans;\n}\n\nvar NAVIGATION_TIMING_MARKS = ['fetchStart', 'domainLookupStart', 'domainLookupEnd', 'connectStart', 'connectEnd', 'requestStart', 'responseStart', 'responseEnd', 'domLoading', 'domInteractive', 'domContentLoadedEventStart', 'domContentLoadedEventEnd', 'domComplete', 'loadEventStart', 'loadEventEnd'];\nvar COMPRESSED_NAV_TIMING_MARKS = ['fs', 'ls', 'le', 'cs', 'ce', 'qs', 'rs', 're', 'dl', 'di', 'ds', 'de', 'dc', 'es', 'ee'];\n\nfunction getNavigationTimingMarks(timing) {\n  var fetchStart = timing.fetchStart,\n      navigationStart = timing.navigationStart,\n      responseStart = timing.responseStart,\n      responseEnd = timing.responseEnd;\n\n  if (fetchStart >= navigationStart && responseStart >= fetchStart && responseEnd >= responseStart) {\n    var marks = {};\n    NAVIGATION_TIMING_MARKS.forEach(function (timingKey) {\n      var m = timing[timingKey];\n\n      if (m && m >= fetchStart) {\n        marks[timingKey] = parseInt(m - fetchStart);\n      }\n    });\n    return marks;\n  }\n\n  return null;\n}\n\nfunction getPageLoadMarks(timing) {\n  var marks = getNavigationTimingMarks(timing);\n\n  if (marks == null) {\n    return null;\n  }\n\n  return {\n    navigationTiming: marks,\n    agent: {\n      timeToFirstByte: marks.responseStart,\n      domInteractive: marks.domInteractive,\n      domComplete: marks.domComplete\n    }\n  };\n}\n\nfunction captureNavigation(transaction) {\n  if (!transaction.captureTimings) {\n    return;\n  }\n\n  var trEnd = transaction._end;\n\n  if (transaction.type === PAGE_LOAD) {\n    if (transaction.marks && transaction.marks.custom) {\n      var customMarks = transaction.marks.custom;\n      Object.keys(customMarks).forEach(function (key) {\n        customMarks[key] += transaction._start;\n      });\n    }\n\n    var trStart = 0;\n    transaction._start = trStart;\n    var timings = PERF.timing;\n    createNavigationTimingSpans(timings, timings.fetchStart, trStart, trEnd).forEach(function (span) {\n      span.traceId = transaction.traceId;\n      span.sampled = transaction.sampled;\n\n      if (span.pageResponse && transaction.options.pageLoadSpanId) {\n        span.id = transaction.options.pageLoadSpanId;\n      }\n\n      transaction.spans.push(span);\n    });\n    transaction.addMarks(getPageLoadMarks(timings));\n  }\n\n  if (isPerfTimelineSupported()) {\n    var _trStart = transaction._start;\n    var resourceEntries = PERF.getEntriesByType(RESOURCE);\n    createResourceTimingSpans(resourceEntries, state.bootstrapTime, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n    var userEntries = PERF.getEntriesByType(MEASURE);\n    createUserTimingSpans(userEntries, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n  }\n}\n\nexport { getPageLoadMarks, captureNavigation, createNavigationTimingSpans, createResourceTimingSpans, createUserTimingSpans, NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS };", "import { Promise } from './polyfills';\nimport { NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS } from '../performance-monitoring/capture-navigation';\n\nfunction compressStackFrames(frames) {\n  return frames.map(function (frame) {\n    return {\n      ap: frame.abs_path,\n      f: frame.filename,\n      fn: frame.function,\n      li: frame.lineno,\n      co: frame.colno\n    };\n  });\n}\n\nfunction compressResponse(response) {\n  return {\n    ts: response.transfer_size,\n    ebs: response.encoded_body_size,\n    dbs: response.decoded_body_size\n  };\n}\n\nfunction compressHTTP(http) {\n  var compressed = {};\n  var method = http.method,\n      status_code = http.status_code,\n      url = http.url,\n      response = http.response;\n  compressed.url = url;\n\n  if (method) {\n    compressed.mt = method;\n  }\n\n  if (status_code) {\n    compressed.sc = status_code;\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  return compressed;\n}\n\nfunction compressContext(context) {\n  if (!context) {\n    return null;\n  }\n\n  var compressed = {};\n  var page = context.page,\n      http = context.http,\n      response = context.response,\n      destination = context.destination,\n      user = context.user,\n      custom = context.custom;\n\n  if (page) {\n    compressed.p = {\n      rf: page.referer,\n      url: page.url\n    };\n  }\n\n  if (http) {\n    compressed.h = compressHTTP(http);\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  if (destination) {\n    var service = destination.service;\n    compressed.dt = {\n      se: {\n        n: service.name,\n        t: service.type,\n        rc: service.resource\n      },\n      ad: destination.address,\n      po: destination.port\n    };\n  }\n\n  if (user) {\n    compressed.u = {\n      id: user.id,\n      un: user.username,\n      em: user.email\n    };\n  }\n\n  if (custom) {\n    compressed.cu = custom;\n  }\n\n  return compressed;\n}\n\nfunction compressMarks(marks) {\n  if (!marks) {\n    return null;\n  }\n\n  var navigationTiming = marks.navigationTiming,\n      agent = marks.agent;\n  var compressed = {\n    nt: {}\n  };\n  COMPRESSED_NAV_TIMING_MARKS.forEach(function (mark, index) {\n    var mapping = NAVIGATION_TIMING_MARKS[index];\n    compressed.nt[mark] = navigationTiming[mapping];\n  });\n  compressed.a = {\n    fb: compressed.nt.rs,\n    di: compressed.nt.di,\n    dc: compressed.nt.dc\n  };\n  var fp = agent.firstContentfulPaint;\n  var lp = agent.largestContentfulPaint;\n\n  if (fp) {\n    compressed.a.fp = fp;\n  }\n\n  if (lp) {\n    compressed.a.lp = lp;\n  }\n\n  return compressed;\n}\n\nexport function compressMetadata(metadata) {\n  var service = metadata.service,\n      labels = metadata.labels;\n  var agent = service.agent,\n      language = service.language;\n  return {\n    se: {\n      n: service.name,\n      ve: service.version,\n      a: {\n        n: agent.name,\n        ve: agent.version\n      },\n      la: {\n        n: language.name\n      },\n      en: service.environment\n    },\n    l: labels\n  };\n}\nexport function compressTransaction(transaction) {\n  var spans = transaction.spans.map(function (span) {\n    var spanData = {\n      id: span.id,\n      n: span.name,\n      t: span.type,\n      s: span.start,\n      d: span.duration,\n      c: compressContext(span.context),\n      o: span.outcome,\n      sr: span.sample_rate\n    };\n\n    if (span.parent_id !== transaction.id) {\n      spanData.pid = span.parent_id;\n    }\n\n    if (span.sync === true) {\n      spanData.sy = true;\n    }\n\n    if (span.subtype) {\n      spanData.su = span.subtype;\n    }\n\n    if (span.action) {\n      spanData.ac = span.action;\n    }\n\n    return spanData;\n  });\n  var tr = {\n    id: transaction.id,\n    tid: transaction.trace_id,\n    n: transaction.name,\n    t: transaction.type,\n    d: transaction.duration,\n    c: compressContext(transaction.context),\n    k: compressMarks(transaction.marks),\n    me: compressMetricsets(transaction.breakdown),\n    y: spans,\n    yc: {\n      sd: spans.length\n    },\n    sm: transaction.sampled,\n    sr: transaction.sample_rate,\n    o: transaction.outcome\n  };\n\n  if (transaction.experience) {\n    var _transaction$experien = transaction.experience,\n        cls = _transaction$experien.cls,\n        fid = _transaction$experien.fid,\n        tbt = _transaction$experien.tbt,\n        longtask = _transaction$experien.longtask;\n    tr.exp = {\n      cls: cls,\n      fid: fid,\n      tbt: tbt,\n      lt: longtask\n    };\n  }\n\n  if (transaction.session) {\n    var _transaction$session = transaction.session,\n        id = _transaction$session.id,\n        sequence = _transaction$session.sequence;\n    tr.ses = {\n      id: id,\n      seq: sequence\n    };\n  }\n\n  return tr;\n}\nexport function compressError(error) {\n  var exception = error.exception;\n  var compressed = {\n    id: error.id,\n    cl: error.culprit,\n    ex: {\n      mg: exception.message,\n      st: compressStackFrames(exception.stacktrace),\n      t: error.type\n    },\n    c: compressContext(error.context)\n  };\n  var transaction = error.transaction;\n\n  if (transaction) {\n    compressed.tid = error.trace_id;\n    compressed.pid = error.parent_id;\n    compressed.xid = error.transaction_id;\n    compressed.x = {\n      t: transaction.type,\n      sm: transaction.sampled\n    };\n  }\n\n  return compressed;\n}\nexport function compressMetricsets(breakdowns) {\n  return breakdowns.map(function (_ref) {\n    var span = _ref.span,\n        samples = _ref.samples;\n    var isSpan = span != null;\n\n    if (isSpan) {\n      return {\n        y: {\n          t: span.type\n        },\n        sa: {\n          ysc: {\n            v: samples['span.self_time.count'].value\n          },\n          yss: {\n            v: samples['span.self_time.sum.us'].value\n          }\n        }\n      };\n    }\n\n    return {\n      sa: {\n        xdc: {\n          v: samples['transaction.duration.count'].value\n        },\n        xds: {\n          v: samples['transaction.duration.sum.us'].value\n        },\n        xbc: {\n          v: samples['transaction.breakdown.count'].value\n        }\n      }\n    };\n  });\n}\nexport function compressPayload(params, type) {\n  if (type === void 0) {\n    type = 'gzip';\n  }\n\n  var isCompressionStreamSupported = typeof CompressionStream === 'function';\n  return new Promise(function (resolve) {\n    if (!isCompressionStreamSupported) {\n      return resolve(params);\n    }\n\n    var payload = params.payload,\n        headers = params.headers,\n        beforeSend = params.beforeSend;\n    var payloadStream = new Blob([payload]).stream();\n    var compressedStream = payloadStream.pipeThrough(new CompressionStream(type));\n    return new Response(compressedStream).blob().then(function (payload) {\n      headers['Content-Encoding'] = type;\n      return resolve({\n        payload: payload,\n        headers: headers,\n        beforeSend: beforeSend\n      });\n    });\n  });\n}", "import Queue from './queue';\nimport throttle from './throttle';\nimport NDJSON from './ndjson';\nimport { XHR_IGNORE } from './patching/patch-utils';\nimport { truncateModel, METADATA_MODEL } from './truncate';\nimport { ERRORS, TRANSACTIONS } from './constants';\nimport { noop } from './utils';\nimport { Promise } from './polyfills';\nimport { compressMetadata, compressTransaction, compressError, compressPayload } from './compress';\nimport { __DEV__ } from '../state';\nvar THROTTLE_INTERVAL = 60000;\n\nvar ApmServer = function () {\n  function ApmServer(configService, loggingService) {\n    this._configService = configService;\n    this._loggingService = loggingService;\n    this.queue = undefined;\n    this.throttleEvents = noop;\n  }\n\n  var _proto = ApmServer.prototype;\n\n  _proto.init = function init() {\n    var _this = this;\n\n    var queueLimit = this._configService.get('queueLimit');\n\n    var flushInterval = this._configService.get('flushInterval');\n\n    var limit = this._configService.get('eventsLimit');\n\n    var onFlush = function onFlush(events) {\n      var promise = _this.sendEvents(events);\n\n      if (promise) {\n        promise.catch(function (reason) {\n          _this._loggingService.warn('Failed sending events!', _this._constructError(reason));\n        });\n      }\n    };\n\n    this.queue = new Queue(onFlush, {\n      queueLimit: queueLimit,\n      flushInterval: flushInterval\n    });\n    this.throttleEvents = throttle(this.queue.add.bind(this.queue), function () {\n      return _this._loggingService.warn('Dropped events due to throttling!');\n    }, {\n      limit: limit,\n      interval: THROTTLE_INTERVAL\n    });\n  };\n\n  _proto._postJson = function _postJson(endPoint, payload) {\n    var _this2 = this;\n\n    var headers = {\n      'Content-Type': 'application/x-ndjson'\n    };\n\n    var apmRequest = this._configService.get('apmRequest');\n\n    var params = {\n      payload: payload,\n      headers: headers,\n      beforeSend: apmRequest\n    };\n    return compressPayload(params).catch(function (error) {\n      if (__DEV__) {\n        _this2._loggingService.debug('Compressing the payload using CompressionStream API failed', error.message);\n      }\n\n      return params;\n    }).then(function (result) {\n      return _this2._makeHttpRequest('POST', endPoint, result);\n    }).then(function (_ref) {\n      var responseText = _ref.responseText;\n      return responseText;\n    });\n  };\n\n  _proto._constructError = function _constructError(reason) {\n    var url = reason.url,\n        status = reason.status,\n        responseText = reason.responseText;\n\n    if (typeof status == 'undefined') {\n      return reason;\n    }\n\n    var message = url + ' HTTP status: ' + status;\n\n    if (__DEV__ && responseText) {\n      try {\n        var serverErrors = [];\n        var response = JSON.parse(responseText);\n\n        if (response.errors && response.errors.length > 0) {\n          response.errors.forEach(function (err) {\n            return serverErrors.push(err.message);\n          });\n          message += ' ' + serverErrors.join(',');\n        }\n      } catch (e) {\n        this._loggingService.debug('Error parsing response from APM server', e);\n      }\n    }\n\n    return new Error(message);\n  };\n\n  _proto._makeHttpRequest = function _makeHttpRequest(method, url, _temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$timeout = _ref2.timeout,\n        timeout = _ref2$timeout === void 0 ? 10000 : _ref2$timeout,\n        payload = _ref2.payload,\n        headers = _ref2.headers,\n        beforeSend = _ref2.beforeSend;\n\n    return new Promise(function (resolve, reject) {\n      var xhr = new window.XMLHttpRequest();\n      xhr[XHR_IGNORE] = true;\n      xhr.open(method, url, true);\n      xhr.timeout = timeout;\n\n      if (headers) {\n        for (var header in headers) {\n          if (headers.hasOwnProperty(header)) {\n            xhr.setRequestHeader(header, headers[header]);\n          }\n        }\n      }\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          var status = xhr.status,\n              responseText = xhr.responseText;\n\n          if (status === 0 || status > 399 && status < 600) {\n            reject({\n              url: url,\n              status: status,\n              responseText: responseText\n            });\n          } else {\n            resolve(xhr);\n          }\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            responseText = xhr.responseText;\n        reject({\n          url: url,\n          status: status,\n          responseText: responseText\n        });\n      };\n\n      var canSend = true;\n\n      if (typeof beforeSend === 'function') {\n        canSend = beforeSend({\n          url: url,\n          method: method,\n          headers: headers,\n          payload: payload,\n          xhr: xhr\n        });\n      }\n\n      if (canSend) {\n        xhr.send(payload);\n      } else {\n        reject({\n          url: url,\n          status: 0,\n          responseText: 'Request rejected by user configuration.'\n        });\n      }\n    });\n  };\n\n  _proto.fetchConfig = function fetchConfig(serviceName, environment) {\n    var _this3 = this;\n\n    var serverUrl = this._configService.get('serverUrl');\n\n    var configEndpoint = serverUrl + \"/config/v1/rum/agents\";\n\n    if (!serviceName) {\n      return Promise.reject('serviceName is required for fetching central config.');\n    }\n\n    configEndpoint += \"?service.name=\" + serviceName;\n\n    if (environment) {\n      configEndpoint += \"&service.environment=\" + environment;\n    }\n\n    var localConfig = this._configService.getLocalConfig();\n\n    if (localConfig) {\n      configEndpoint += \"&ifnonematch=\" + localConfig.etag;\n    }\n\n    var apmRequest = this._configService.get('apmRequest');\n\n    return this._makeHttpRequest('GET', configEndpoint, {\n      timeout: 5000,\n      beforeSend: apmRequest\n    }).then(function (xhr) {\n      var status = xhr.status,\n          responseText = xhr.responseText;\n\n      if (status === 304) {\n        return localConfig;\n      } else {\n        var remoteConfig = JSON.parse(responseText);\n        var etag = xhr.getResponseHeader('etag');\n\n        if (etag) {\n          remoteConfig.etag = etag.replace(/[\"]/g, '');\n\n          _this3._configService.setLocalConfig(remoteConfig, true);\n        }\n\n        return remoteConfig;\n      }\n    }).catch(function (reason) {\n      var error = _this3._constructError(reason);\n\n      return Promise.reject(error);\n    });\n  };\n\n  _proto.createMetaData = function createMetaData() {\n    var cfg = this._configService;\n    var metadata = {\n      service: {\n        name: cfg.get('serviceName'),\n        version: cfg.get('serviceVersion'),\n        agent: {\n          name: 'rum-js',\n          version: cfg.version\n        },\n        language: {\n          name: 'javascript'\n        },\n        environment: cfg.get('environment')\n      },\n      labels: cfg.get('context.tags')\n    };\n    return truncateModel(METADATA_MODEL, metadata);\n  };\n\n  _proto.addError = function addError(error) {\n    var _this$throttleEvents;\n\n    this.throttleEvents((_this$throttleEvents = {}, _this$throttleEvents[ERRORS] = error, _this$throttleEvents));\n  };\n\n  _proto.addTransaction = function addTransaction(transaction) {\n    var _this$throttleEvents2;\n\n    this.throttleEvents((_this$throttleEvents2 = {}, _this$throttleEvents2[TRANSACTIONS] = transaction, _this$throttleEvents2));\n  };\n\n  _proto.ndjsonErrors = function ndjsonErrors(errors, compress) {\n    var key = compress ? 'e' : 'error';\n    return errors.map(function (error) {\n      var _NDJSON$stringify;\n\n      return NDJSON.stringify((_NDJSON$stringify = {}, _NDJSON$stringify[key] = compress ? compressError(error) : error, _NDJSON$stringify));\n    });\n  };\n\n  _proto.ndjsonMetricsets = function ndjsonMetricsets(metricsets) {\n    return metricsets.map(function (metricset) {\n      return NDJSON.stringify({\n        metricset: metricset\n      });\n    }).join('');\n  };\n\n  _proto.ndjsonTransactions = function ndjsonTransactions(transactions, compress) {\n    var _this4 = this;\n\n    var key = compress ? 'x' : 'transaction';\n    return transactions.map(function (tr) {\n      var _NDJSON$stringify2;\n\n      var spans = '',\n          breakdowns = '';\n\n      if (!compress) {\n        if (tr.spans) {\n          spans = tr.spans.map(function (span) {\n            return NDJSON.stringify({\n              span: span\n            });\n          }).join('');\n          delete tr.spans;\n        }\n\n        if (tr.breakdown) {\n          breakdowns = _this4.ndjsonMetricsets(tr.breakdown);\n          delete tr.breakdown;\n        }\n      }\n\n      return NDJSON.stringify((_NDJSON$stringify2 = {}, _NDJSON$stringify2[key] = compress ? compressTransaction(tr) : tr, _NDJSON$stringify2)) + spans + breakdowns;\n    });\n  };\n\n  _proto.sendEvents = function sendEvents(events) {\n    var _payload, _NDJSON$stringify3;\n\n    if (events.length === 0) {\n      return;\n    }\n\n    var transactions = [];\n    var errors = [];\n\n    for (var i = 0; i < events.length; i++) {\n      var event = events[i];\n\n      if (event[TRANSACTIONS]) {\n        transactions.push(event[TRANSACTIONS]);\n      }\n\n      if (event[ERRORS]) {\n        errors.push(event[ERRORS]);\n      }\n    }\n\n    if (transactions.length === 0 && errors.length === 0) {\n      return;\n    }\n\n    var cfg = this._configService;\n    var payload = (_payload = {}, _payload[TRANSACTIONS] = transactions, _payload[ERRORS] = errors, _payload);\n    var filteredPayload = cfg.applyFilters(payload);\n\n    if (!filteredPayload) {\n      this._loggingService.warn('Dropped payload due to filtering!');\n\n      return;\n    }\n\n    var apiVersion = cfg.get('apiVersion');\n    var compress = apiVersion > 2;\n    var ndjson = [];\n    var metadata = this.createMetaData();\n    var metadataKey = compress ? 'm' : 'metadata';\n    ndjson.push(NDJSON.stringify((_NDJSON$stringify3 = {}, _NDJSON$stringify3[metadataKey] = compress ? compressMetadata(metadata) : metadata, _NDJSON$stringify3)));\n    ndjson = ndjson.concat(this.ndjsonErrors(filteredPayload[ERRORS], compress), this.ndjsonTransactions(filteredPayload[TRANSACTIONS], compress));\n    var ndjsonPayload = ndjson.join('');\n    var endPoint = cfg.get('serverUrl') + (\"/intake/v\" + apiVersion + \"/rum/events\");\n    return this._postJson(endPoint, ndjsonPayload);\n  };\n\n  return ApmServer;\n}();\n\nexport default ApmServer;", "import { BEFORE_EVENT, AFTER_EVENT } from './constants';\n\nvar EventHandler = function () {\n  function EventHandler() {\n    this.observers = {};\n  }\n\n  var _proto = EventHandler.prototype;\n\n  _proto.observe = function observe(name, fn) {\n    var _this = this;\n\n    if (typeof fn === 'function') {\n      if (!this.observers[name]) {\n        this.observers[name] = [];\n      }\n\n      this.observers[name].push(fn);\n      return function () {\n        var index = _this.observers[name].indexOf(fn);\n\n        if (index > -1) {\n          _this.observers[name].splice(index, 1);\n        }\n      };\n    }\n  };\n\n  _proto.sendOnly = function sendOnly(name, args) {\n    var obs = this.observers[name];\n\n    if (obs) {\n      obs.forEach(function (fn) {\n        try {\n          fn.apply(undefined, args);\n        } catch (error) {\n          console.log(error, error.stack);\n        }\n      });\n    }\n  };\n\n  _proto.send = function send(name, args) {\n    this.sendOnly(name + BEFORE_EVENT, args);\n    this.sendOnly(name, args);\n    this.sendOnly(name + AFTER_EVENT, args);\n  };\n\n  return EventHandler;\n}();\n\nexport default EventHandler;", "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { getCurrentScript, setLabel, merge, extend, isUndefined } from './utils';\nimport EventHandler from './event-handler';\nimport { CONFIG_CHANGE, LOCAL_CONFIG_KEY } from './constants';\n\nfunction getConfigFromScript() {\n  var script = getCurrentScript();\n  var config = getDataAttributesFromNode(script);\n  return config;\n}\n\nfunction getDataAttributesFromNode(node) {\n  if (!node) {\n    return {};\n  }\n\n  var dataAttrs = {};\n  var dataRegex = /^data-([\\w-]+)$/;\n  var attrs = node.attributes;\n\n  for (var i = 0; i < attrs.length; i++) {\n    var attr = attrs[i];\n\n    if (dataRegex.test(attr.nodeName)) {\n      var key = attr.nodeName.match(dataRegex)[1];\n      var camelCasedkey = key.split('-').map(function (value, index) {\n        return index > 0 ? value.charAt(0).toUpperCase() + value.substring(1) : value;\n      }).join('');\n      dataAttrs[camelCasedkey] = attr.value || attr.nodeValue;\n    }\n  }\n\n  return dataAttrs;\n}\n\nvar Config = function () {\n  function Config() {\n    this.config = {\n      serviceName: '',\n      serviceVersion: '',\n      environment: '',\n      serverUrl: 'http://localhost:8200',\n      active: true,\n      instrument: true,\n      disableInstrumentations: [],\n      logLevel: 'warn',\n      breakdownMetrics: false,\n      ignoreTransactions: [],\n      eventsLimit: 80,\n      queueLimit: -1,\n      flushInterval: 500,\n      distributedTracing: true,\n      distributedTracingOrigins: [],\n      distributedTracingHeaderName: 'traceparent',\n      pageLoadTraceId: '',\n      pageLoadSpanId: '',\n      pageLoadSampled: false,\n      pageLoadTransactionName: '',\n      propagateTracestate: false,\n      transactionSampleRate: 1.0,\n      centralConfig: false,\n      monitorLongtasks: true,\n      apiVersion: 2,\n      context: {},\n      session: false,\n      apmRequest: null\n    };\n    this.events = new EventHandler();\n    this.filters = [];\n    this.version = '';\n  }\n\n  var _proto = Config.prototype;\n\n  _proto.init = function init() {\n    var scriptData = getConfigFromScript();\n    this.setConfig(scriptData);\n  };\n\n  _proto.setVersion = function setVersion(version) {\n    this.version = version;\n  };\n\n  _proto.addFilter = function addFilter(cb) {\n    if (typeof cb !== 'function') {\n      throw new Error('Argument to must be function');\n    }\n\n    this.filters.push(cb);\n  };\n\n  _proto.applyFilters = function applyFilters(data) {\n    for (var i = 0; i < this.filters.length; i++) {\n      data = this.filters[i](data);\n\n      if (!data) {\n        return;\n      }\n    }\n\n    return data;\n  };\n\n  _proto.get = function get(key) {\n    return key.split('.').reduce(function (obj, objKey) {\n      return obj && obj[objKey];\n    }, this.config);\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    if (userContext === void 0) {\n      userContext = {};\n    }\n\n    var context = {};\n    var _userContext = userContext,\n        id = _userContext.id,\n        username = _userContext.username,\n        email = _userContext.email;\n\n    if (typeof id === 'number' || typeof id === 'string') {\n      context.id = id;\n    }\n\n    if (typeof username === 'string') {\n      context.username = username;\n    }\n\n    if (typeof email === 'string') {\n      context.email = email;\n    }\n\n    this.config.context.user = extend(this.config.context.user || {}, context);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    if (customContext === void 0) {\n      customContext = {};\n    }\n\n    this.config.context.custom = extend(this.config.context.custom || {}, customContext);\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    var _this = this;\n\n    if (!this.config.context.tags) {\n      this.config.context.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], _this.config.context.tags);\n    });\n  };\n\n  _proto.setConfig = function setConfig(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var _properties = properties,\n        transactionSampleRate = _properties.transactionSampleRate,\n        serverUrl = _properties.serverUrl;\n\n    if (serverUrl) {\n      properties.serverUrl = serverUrl.replace(/\\/+$/, '');\n    }\n\n    if (!isUndefined(transactionSampleRate)) {\n      if (transactionSampleRate < 0.0001 && transactionSampleRate > 0) {\n        transactionSampleRate = 0.0001;\n      }\n\n      properties.transactionSampleRate = Math.round(transactionSampleRate * 10000) / 10000;\n    }\n\n    merge(this.config, properties);\n    this.events.send(CONFIG_CHANGE, [this.config]);\n  };\n\n  _proto.validate = function validate(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var requiredKeys = ['serviceName', 'serverUrl'];\n    var errors = {\n      missing: [],\n      invalid: []\n    };\n    Object.keys(properties).forEach(function (key) {\n      if (requiredKeys.indexOf(key) !== -1 && !properties[key]) {\n        errors.missing.push(key);\n      }\n    });\n\n    if (properties.serviceName && !/^[a-zA-Z0-9 _-]+$/.test(properties.serviceName)) {\n      errors.invalid.push({\n        key: 'serviceName',\n        value: properties.serviceName,\n        allowed: 'a-z, A-Z, 0-9, _, -, <space>'\n      });\n    }\n\n    var sampleRate = properties.transactionSampleRate;\n\n    if (typeof sampleRate !== 'undefined' && (typeof sampleRate !== 'number' || isNaN(sampleRate) || sampleRate < 0 || sampleRate > 1)) {\n      errors.invalid.push({\n        key: 'transactionSampleRate',\n        value: sampleRate,\n        allowed: 'Number between 0 and 1'\n      });\n    }\n\n    return errors;\n  };\n\n  _proto.getLocalConfig = function getLocalConfig() {\n    var storage = sessionStorage;\n\n    if (this.config.session) {\n      storage = localStorage;\n    }\n\n    var config = storage.getItem(LOCAL_CONFIG_KEY);\n\n    if (config) {\n      return JSON.parse(config);\n    }\n  };\n\n  _proto.setLocalConfig = function setLocalConfig(config, merge) {\n    if (config) {\n      if (merge) {\n        var prevConfig = this.getLocalConfig();\n        config = _extends({}, prevConfig, config);\n      }\n\n      var storage = sessionStorage;\n\n      if (this.config.session) {\n        storage = localStorage;\n      }\n\n      storage.setItem(LOCAL_CONFIG_KEY, JSON.stringify(config));\n    }\n  };\n\n  return Config;\n}();\n\nexport default Config;", "import { noop } from './utils';\n\nvar LoggingService = function () {\n  function LoggingService(spec) {\n    if (spec === void 0) {\n      spec = {};\n    }\n\n    this.levels = ['trace', 'debug', 'info', 'warn', 'error'];\n    this.level = spec.level || 'warn';\n    this.prefix = spec.prefix || '';\n    this.resetLogMethods();\n  }\n\n  var _proto = LoggingService.prototype;\n\n  _proto.shouldLog = function shouldLog(level) {\n    return this.levels.indexOf(level) >= this.levels.indexOf(this.level);\n  };\n\n  _proto.setLevel = function setLevel(level) {\n    if (level === this.level) {\n      return;\n    }\n\n    this.level = level;\n    this.resetLogMethods();\n  };\n\n  _proto.resetLogMethods = function resetLogMethods() {\n    var _this = this;\n\n    this.levels.forEach(function (level) {\n      _this[level] = _this.shouldLog(level) ? log : noop;\n\n      function log() {\n        var normalizedLevel = level;\n\n        if (level === 'trace' || level === 'debug') {\n          normalizedLevel = 'info';\n        }\n\n        var args = arguments;\n        args[0] = this.prefix + args[0];\n\n        if (console) {\n          var realMethod = console[normalizedLevel] || console.log;\n\n          if (typeof realMethod === 'function') {\n            realMethod.apply(console, args);\n          }\n        }\n      }\n    });\n  };\n\n  return LoggingService;\n}();\n\nexport default LoggingService;", "var _serviceCreators;\n\nimport ApmServer from './apm-server';\nimport ConfigService from './config-service';\nimport LoggingService from './logging-service';\nimport { CONFIG_CHANGE, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from './constants';\nimport { __DEV__ } from '../state';\nvar serviceCreators = (_serviceCreators = {}, _serviceCreators[CONFIG_SERVICE] = function () {\n  return new ConfigService();\n}, _serviceCreators[LOGGING_SERVICE] = function () {\n  return new LoggingService({\n    prefix: '[Elastic APM] '\n  });\n}, _serviceCreators[APM_SERVER] = function (factory) {\n  var _factory$getService = factory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n      configService = _factory$getService[0],\n      loggingService = _factory$getService[1];\n\n  return new ApmServer(configService, loggingService);\n}, _serviceCreators);\n\nvar ServiceFactory = function () {\n  function ServiceFactory() {\n    this.instances = {};\n    this.initialized = false;\n  }\n\n  var _proto = ServiceFactory.prototype;\n\n  _proto.init = function init() {\n    if (this.initialized) {\n      return;\n    }\n\n    this.initialized = true;\n    var configService = this.getService(CONFIG_SERVICE);\n    configService.init();\n\n    var _this$getService = this.getService([LOGGING_SERVICE, APM_SERVER]),\n        loggingService = _this$getService[0],\n        apmServer = _this$getService[1];\n\n    configService.events.observe(CONFIG_CHANGE, function () {\n      var logLevel = configService.get('logLevel');\n      loggingService.setLevel(logLevel);\n    });\n    apmServer.init();\n  };\n\n  _proto.getService = function getService(name) {\n    var _this = this;\n\n    if (typeof name === 'string') {\n      if (!this.instances[name]) {\n        if (typeof serviceCreators[name] === 'function') {\n          this.instances[name] = serviceCreators[name](this);\n        } else if (__DEV__) {\n          console.log('Cannot get service, No creator for: ' + name);\n        }\n      }\n\n      return this.instances[name];\n    } else if (Array.isArray(name)) {\n      return name.map(function (n) {\n        return _this.getService(n);\n      });\n    }\n  };\n\n  return ServiceFactory;\n}();\n\nexport { serviceCreators, ServiceFactory };", "import ErrorLogging from './error-logging';\nimport { CONFIG_SERVICE, APM_SERVER } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\n\nfunction registerServices() {\n  serviceCreators['ErrorLogging'] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, 'TransactionService']),\n        apmServer = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1],\n        transactionService = _serviceFactory$getSe[2];\n\n    return new ErrorLogging(apmServer, configService, transactionService);\n  };\n}\n\nexport { registerServices };", "import { patchMethod, XHR_SYNC, XHR_URL, XHR_METHOD, XHR_IGNORE } from './patch-utils';\nimport { SCHEDULE, INVOKE, XMLHTTPREQUEST, ADD_EVENT_LISTENER_STR } from '../constants';\nexport function patchXMLHttpRequest(callback) {\n  var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n\n  if (!XMLHttpRequestPrototype || !XMLHttpRequestPrototype[ADD_EVENT_LISTENER_STR]) {\n    return;\n  }\n\n  var READY_STATE_CHANGE = 'readystatechange';\n  var LOAD = 'load';\n  var ERROR = 'error';\n  var TIMEOUT = 'timeout';\n  var ABORT = 'abort';\n\n  function invokeTask(task, status) {\n    if (task.state !== INVOKE) {\n      task.state = INVOKE;\n      task.data.status = status;\n      callback(INVOKE, task);\n    }\n  }\n\n  function scheduleTask(task) {\n    if (task.state === SCHEDULE) {\n      return;\n    }\n\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n    var target = task.data.target;\n\n    function addListener(name) {\n      target[ADD_EVENT_LISTENER_STR](name, function (_ref) {\n        var type = _ref.type;\n\n        if (type === READY_STATE_CHANGE) {\n          if (target.readyState === 4 && target.status !== 0) {\n            invokeTask(task, 'success');\n          }\n        } else {\n          var status = type === LOAD ? 'success' : type;\n          invokeTask(task, status);\n        }\n      });\n    }\n\n    addListener(READY_STATE_CHANGE);\n    addListener(LOAD);\n    addListener(TIMEOUT);\n    addListener(ERROR);\n    addListener(ABORT);\n  }\n\n  var openNative = patchMethod(XMLHttpRequestPrototype, 'open', function () {\n    return function (self, args) {\n      if (!self[XHR_IGNORE]) {\n        self[XHR_METHOD] = args[0];\n        self[XHR_URL] = args[1];\n        self[XHR_SYNC] = args[2] === false;\n      }\n\n      return openNative.apply(self, args);\n    };\n  });\n  var sendNative = patchMethod(XMLHttpRequestPrototype, 'send', function () {\n    return function (self, args) {\n      if (self[XHR_IGNORE]) {\n        return sendNative.apply(self, args);\n      }\n\n      var task = {\n        source: XMLHTTPREQUEST,\n        state: '',\n        type: 'macroTask',\n        data: {\n          target: self,\n          method: self[XHR_METHOD],\n          sync: self[XHR_SYNC],\n          url: self[XHR_URL],\n          status: ''\n        }\n      };\n\n      try {\n        scheduleTask(task);\n        return sendNative.apply(self, args);\n      } catch (e) {\n        invokeTask(task, ERROR);\n        throw e;\n      }\n    };\n  });\n}", "import { Promise } from '../polyfills';\nimport { globalState } from './patch-utils';\nimport { SCHEDULE, INVOKE, FETCH } from '../constants';\nimport { scheduleMicroTask } from '../utils';\nexport function patchFetch(callback) {\n  if (!window.fetch || !window.Request) {\n    return;\n  }\n\n  function scheduleTask(task) {\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n  }\n\n  function invokeTask(task) {\n    task.state = INVOKE;\n    callback(INVOKE, task);\n  }\n\n  var nativeFetch = window.fetch;\n\n  window.fetch = function (input, init) {\n    var fetchSelf = this;\n    var args = arguments;\n    var request, url;\n\n    if (typeof input === 'string') {\n      request = new Request(input, init);\n      url = input;\n    } else if (input) {\n      request = input;\n      url = request.url;\n    } else {\n      return nativeFetch.apply(fetchSelf, args);\n    }\n\n    var task = {\n      source: FETCH,\n      state: '',\n      type: 'macroTask',\n      data: {\n        target: request,\n        method: request.method,\n        url: url,\n        aborted: false\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      globalState.fetchInProgress = true;\n      scheduleTask(task);\n      var promise;\n\n      try {\n        promise = nativeFetch.apply(fetchSelf, [request]);\n      } catch (error) {\n        reject(error);\n        task.data.error = error;\n        invokeTask(task);\n        globalState.fetchInProgress = false;\n        return;\n      }\n\n      promise.then(function (response) {\n        resolve(response);\n        scheduleMicroTask(function () {\n          task.data.response = response;\n          invokeTask(task);\n        });\n      }, function (error) {\n        reject(error);\n        scheduleMicroTask(function () {\n          task.data.error = error;\n          invokeTask(task);\n        });\n      });\n      globalState.fetchInProgress = false;\n    });\n  };\n}", "import { INVOKE, HISTORY } from '../constants';\nexport function patchHistory(callback) {\n  if (!window.history) {\n    return;\n  }\n\n  var nativePushState = history.pushState;\n\n  if (typeof nativePushState === 'function') {\n    history.pushState = function (state, title, url) {\n      var task = {\n        source: HISTORY,\n        data: {\n          state: state,\n          title: title,\n          url: url\n        }\n      };\n      callback(INVOKE, task);\n      nativePushState.apply(this, arguments);\n    };\n  }\n}", "import { SCHEDULE, INVOKE, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, EVENT_TARGET } from '../constants';\nimport { apmSymbol } from './patch-utils';\nvar eventTypes = ['click'];\nvar eventTypeSymbols = {};\n\nfor (var i = 0; i < eventTypes.length; i++) {\n  var et = eventTypes[i];\n  eventTypeSymbols[et] = apmSymbol(et);\n}\n\nfunction shouldInstrumentEvent(target, eventType, listenerFn) {\n  return target instanceof Element && eventTypes.indexOf(eventType) >= 0 && typeof listenerFn === 'function';\n}\n\nexport function patchEventTarget(callback) {\n  if (!window.EventTarget) {\n    return;\n  }\n\n  var proto = window.EventTarget.prototype;\n  var nativeAddEventListener = proto[ADD_EVENT_LISTENER_STR];\n  var nativeRemoveEventListener = proto[REMOVE_EVENT_LISTENER_STR];\n\n  function findTaskIndex(existingTasks, eventType, listenerFn, capture) {\n    for (var _i = 0; _i < existingTasks.length; _i++) {\n      var task = existingTasks[_i];\n\n      if (task.eventType === eventType && task.listenerFn === listenerFn && task.capture === capture) {\n        return _i;\n      }\n    }\n\n    return -1;\n  }\n\n  function isCapture(options) {\n    var capture;\n\n    if (typeof options === 'boolean') {\n      capture = options;\n    } else {\n      capture = options ? !!options.capture : false;\n    }\n\n    return capture;\n  }\n\n  function createListenerWrapper(target, eventType, listenerFn, options) {\n    var eventSymbol = eventTypeSymbols[eventType];\n    if (!eventSymbol) return listenerFn;\n    var existingTasks = target[eventSymbol];\n    var capture = isCapture(options);\n\n    if (existingTasks) {\n      var taskIndex = findTaskIndex(existingTasks, eventType, listenerFn, capture);\n\n      if (taskIndex !== -1) {\n        var _task = existingTasks[taskIndex];\n        return _task.wrappingFn;\n      }\n    } else {\n      existingTasks = target[eventSymbol] = [];\n    }\n\n    var task = {\n      source: EVENT_TARGET,\n      target: target,\n      eventType: eventType,\n      listenerFn: listenerFn,\n      capture: capture,\n      wrappingFn: wrappingFn\n    };\n    existingTasks.push(task);\n\n    function wrappingFn() {\n      callback(SCHEDULE, task);\n      var result;\n\n      try {\n        result = listenerFn.apply(this, arguments);\n      } finally {\n        callback(INVOKE, task);\n      }\n\n      return result;\n    }\n\n    return wrappingFn;\n  }\n\n  function getWrappingFn(target, eventType, listenerFn, options) {\n    var eventSymbol = eventTypeSymbols[eventType];\n    var existingTasks = target[eventSymbol];\n\n    if (existingTasks) {\n      var capture = isCapture(options);\n      var taskIndex = findTaskIndex(existingTasks, eventType, listenerFn, capture);\n\n      if (taskIndex !== -1) {\n        var task = existingTasks[taskIndex];\n        existingTasks.splice(taskIndex, 1);\n\n        if (existingTasks.length === 0) {\n          target[eventSymbol] = undefined;\n        }\n\n        return task.wrappingFn;\n      }\n    }\n\n    return listenerFn;\n  }\n\n  proto[ADD_EVENT_LISTENER_STR] = function (eventType, listenerFn, optionsOrCapture) {\n    var target = this;\n\n    if (!shouldInstrumentEvent(target, eventType, listenerFn)) {\n      return nativeAddEventListener.apply(target, arguments);\n    }\n\n    var wrappingListenerFn = createListenerWrapper(target, eventType, listenerFn, optionsOrCapture);\n    var args = Array.prototype.slice.call(arguments);\n    args[1] = wrappingListenerFn;\n    return nativeAddEventListener.apply(target, args);\n  };\n\n  proto[REMOVE_EVENT_LISTENER_STR] = function (eventType, listenerFn, optionsOrCapture) {\n    var target = this;\n\n    if (!shouldInstrumentEvent(target, eventType, listenerFn)) {\n      return nativeRemoveEventListener.apply(target, arguments);\n    }\n\n    var wrappingFn = getWrappingFn(target, eventType, listenerFn, optionsOrCapture);\n    var args = Array.prototype.slice.call(arguments);\n    args[1] = wrappingFn;\n    return nativeRemoveEventListener.apply(target, args);\n  };\n}", "import { patchXMLHttpRequest } from './xhr-patch';\nimport { patchFetch } from './fetch-patch';\nimport { patchHistory } from './history-patch';\nimport { patchEventTarget } from './event-target-patch';\nimport EventHandler from '../event-handler';\nimport { HISTORY, FETCH, XMLHTTPREQUEST, EVENT_TARGET } from '../constants';\nvar patchEventHandler = new EventHandler();\nvar alreadyPatched = false;\n\nfunction patchAll() {\n  if (!alreadyPatched) {\n    alreadyPatched = true;\n    patchXMLHttpRequest(function (event, task) {\n      patchEventHandler.send(XMLHTTPREQUEST, [event, task]);\n    });\n    patchFetch(function (event, task) {\n      patchEventHandler.send(FETCH, [event, task]);\n    });\n    patchHistory(function (event, task) {\n      patchEventHandler.send(HISTORY, [event, task]);\n    });\n    patchEventTarget(function (event, task) {\n      patchEventHandler.send(EVENT_TARGET, [event, task]);\n    });\n  }\n\n  return patchEventHandler;\n}\n\nexport { patchAll, patchEventHandler };", "import { checkSameOrigin, isDtHeaderValid, parseDtHeaderValue, getDtHeaderValue, getTSHeaderValue, stripQueryStringFromUrl, setRequestHeader } from '../common/utils';\nimport { Url } from '../common/url';\nimport { patchEventHandler } from '../common/patching';\nimport { globalState } from '../common/patching/patch-utils';\nimport { SCHEDULE, INVOKE, TRANSACTION_END, AFTER_EVENT, FETCH, HISTORY, XMLHTTPREQUEST, EVENT_TARGET, HTTP_REQUEST_TYPE, USER_INTERACTION, OUTCOME_FAILURE, OUTCOME_SUCCESS } from '../common/constants';\nimport { truncateModel, SPAN_MODEL, TRANSACTION_MODEL } from '../common/truncate';\nimport { __DEV__ } from '../state';\nvar SIMILAR_SPAN_TO_TRANSACTION_RATIO = 0.05;\nvar TRANSACTION_DURATION_THRESHOLD = 60000;\nexport function groupSmallContinuouslySimilarSpans(originalSpans, transDuration, threshold) {\n  originalSpans.sort(function (spanA, spanB) {\n    return spanA._start - spanB._start;\n  });\n  var spans = [];\n  var lastCount = 1;\n  originalSpans.forEach(function (span, index) {\n    if (spans.length === 0) {\n      spans.push(span);\n    } else {\n      var lastSpan = spans[spans.length - 1];\n      var isContinuouslySimilar = lastSpan.type === span.type && lastSpan.subtype === span.subtype && lastSpan.action === span.action && lastSpan.name === span.name && span.duration() / transDuration < threshold && (span._start - lastSpan._end) / transDuration < threshold;\n      var isLastSpan = originalSpans.length === index + 1;\n\n      if (isContinuouslySimilar) {\n        lastCount++;\n        lastSpan._end = span._end;\n      }\n\n      if (lastCount > 1 && (!isContinuouslySimilar || isLastSpan)) {\n        lastSpan.name = lastCount + 'x ' + lastSpan.name;\n        lastCount = 1;\n      }\n\n      if (!isContinuouslySimilar) {\n        spans.push(span);\n      }\n    }\n  });\n  return spans;\n}\nexport function adjustTransaction(transaction) {\n  if (transaction.sampled) {\n    var filterdSpans = transaction.spans.filter(function (span) {\n      return span.duration() > 0 && span._start >= transaction._start && span._end <= transaction._end;\n    });\n\n    if (transaction.isManaged()) {\n      var duration = transaction.duration();\n      var similarSpans = groupSmallContinuouslySimilarSpans(filterdSpans, duration, SIMILAR_SPAN_TO_TRANSACTION_RATIO);\n      transaction.spans = similarSpans;\n    } else {\n      transaction.spans = filterdSpans;\n    }\n  } else {\n    transaction.resetFields();\n  }\n\n  return transaction;\n}\n\nvar PerformanceMonitoring = function () {\n  function PerformanceMonitoring(apmServer, configService, loggingService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._logginService = loggingService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = PerformanceMonitoring.prototype;\n\n  _proto.init = function init(flags) {\n    var _this = this;\n\n    if (flags === void 0) {\n      flags = {};\n    }\n\n    this._configService.events.observe(TRANSACTION_END + AFTER_EVENT, function (tr) {\n      var payload = _this.createTransactionPayload(tr);\n\n      if (payload) {\n        _this._apmServer.addTransaction(payload);\n      }\n    });\n\n    if (flags[HISTORY]) {\n      patchEventHandler.observe(HISTORY, this.getHistorySub());\n    }\n\n    if (flags[XMLHTTPREQUEST]) {\n      patchEventHandler.observe(XMLHTTPREQUEST, this.getXHRSub());\n    }\n\n    if (flags[FETCH]) {\n      patchEventHandler.observe(FETCH, this.getFetchSub());\n    }\n\n    if (flags[EVENT_TARGET]) {\n      patchEventHandler.observe(EVENT_TARGET, this.getEventTargetSub());\n    }\n  };\n\n  _proto.getEventTargetSub = function getEventTargetSub() {\n    var transactionService = this._transactionService;\n    return function (event, task) {\n      if (event === SCHEDULE && task.source === EVENT_TARGET && task.eventType === 'click') {\n        var target = task.target;\n        var name = target.getAttribute('name');\n        var additionalInfo = '';\n\n        if (name) {\n          additionalInfo = \"[\\\"\" + name + \"\\\"]\";\n        }\n\n        var tagName = target.tagName.toLowerCase();\n        var tr = transactionService.startTransaction(\"Click - \" + tagName + additionalInfo, USER_INTERACTION, {\n          managed: true,\n          canReuse: true,\n          reuseThreshold: 300\n        });\n\n        if (tr) {\n          var classes = target.getAttribute('class');\n\n          if (classes) {\n            tr.addContext({\n              custom: {\n                classes: classes\n              }\n            });\n          }\n        }\n      }\n    };\n  };\n\n  _proto.getHistorySub = function getHistorySub() {\n    var transactionService = this._transactionService;\n    return function (event, task) {\n      if (task.source === HISTORY && event === INVOKE) {\n        transactionService.startTransaction(task.data.title, 'route-change', {\n          managed: true,\n          canReuse: true\n        });\n      }\n    };\n  };\n\n  _proto.getXHRSub = function getXHRSub() {\n    var _this2 = this;\n\n    return function (event, task) {\n      if (task.source === XMLHTTPREQUEST && !globalState.fetchInProgress) {\n        _this2.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.getFetchSub = function getFetchSub() {\n    var _this3 = this;\n\n    return function (event, task) {\n      if (task.source === FETCH) {\n        _this3.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.processAPICalls = function processAPICalls(event, task) {\n    var configService = this._configService;\n    var transactionService = this._transactionService;\n\n    if (event === SCHEDULE && task.data) {\n      var data = task.data;\n      var requestUrl = new Url(data.url);\n      var spanName = data.method + ' ' + (requestUrl.relative ? requestUrl.path : stripQueryStringFromUrl(requestUrl.href));\n\n      if (!transactionService.getCurrentTransaction()) {\n        transactionService.startTransaction(spanName, HTTP_REQUEST_TYPE, {\n          managed: true\n        });\n      }\n\n      var span = transactionService.startSpan(spanName, 'external.http', {\n        blocking: true\n      });\n\n      if (!span) {\n        return;\n      }\n\n      var isDtEnabled = configService.get('distributedTracing');\n      var dtOrigins = configService.get('distributedTracingOrigins');\n      var currentUrl = new Url(window.location.href);\n      var isSameOrigin = checkSameOrigin(requestUrl.origin, currentUrl.origin) || checkSameOrigin(requestUrl.origin, dtOrigins);\n      var target = data.target;\n\n      if (isDtEnabled && isSameOrigin && target) {\n        this.injectDtHeader(span, target);\n        var propagateTracestate = configService.get('propagateTracestate');\n\n        if (propagateTracestate) {\n          this.injectTSHeader(span, target);\n        }\n      } else if (__DEV__) {\n        this._logginService.debug(\"Could not inject distributed tracing header to the request origin ('\" + requestUrl.origin + \"') from the current origin ('\" + currentUrl.origin + \"')\");\n      }\n\n      if (data.sync) {\n        span.sync = data.sync;\n      }\n\n      data.span = span;\n    } else if (event === INVOKE) {\n      var _data = task.data;\n\n      if (_data && _data.span) {\n        var _span = _data.span,\n            response = _data.response,\n            _target = _data.target;\n        var status;\n\n        if (response) {\n          status = response.status;\n        } else {\n          status = _target.status;\n        }\n\n        var outcome;\n\n        if (_data.status != 'abort') {\n          if (status >= 400 || status == 0) {\n            outcome = OUTCOME_FAILURE;\n          } else {\n            outcome = OUTCOME_SUCCESS;\n          }\n        }\n\n        _span.outcome = outcome;\n        var tr = transactionService.getCurrentTransaction();\n\n        if (tr && tr.type === HTTP_REQUEST_TYPE) {\n          tr.outcome = outcome;\n        }\n\n        transactionService.endSpan(_span, _data);\n      }\n    }\n  };\n\n  _proto.injectDtHeader = function injectDtHeader(span, target) {\n    var headerName = this._configService.get('distributedTracingHeaderName');\n\n    var headerValue = getDtHeaderValue(span);\n    var isHeaderValid = isDtHeaderValid(headerValue);\n\n    if (isHeaderValid && headerValue && headerName) {\n      setRequestHeader(target, headerName, headerValue);\n    }\n  };\n\n  _proto.injectTSHeader = function injectTSHeader(span, target) {\n    var headerValue = getTSHeaderValue(span);\n\n    if (headerValue) {\n      setRequestHeader(target, 'tracestate', headerValue);\n    }\n  };\n\n  _proto.extractDtHeader = function extractDtHeader(target) {\n    var configService = this._configService;\n    var headerName = configService.get('distributedTracingHeaderName');\n\n    if (target) {\n      return parseDtHeaderValue(target[headerName]);\n    }\n  };\n\n  _proto.filterTransaction = function filterTransaction(tr) {\n    var duration = tr.duration();\n\n    if (!duration) {\n      if (__DEV__) {\n        var message = \"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! \";\n\n        if (duration === 0) {\n          message += \"Transaction duration is 0\";\n        } else {\n          message += \"Transaction wasn't ended\";\n        }\n\n        this._logginService.debug(message);\n      }\n\n      return false;\n    }\n\n    if (tr.isManaged()) {\n      if (duration > TRANSACTION_DURATION_THRESHOLD) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction duration (\" + duration + \") is greater than managed transaction threshold (\" + TRANSACTION_DURATION_THRESHOLD + \")\");\n        }\n\n        return false;\n      }\n\n      if (tr.sampled && tr.spans.length === 0) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction does not have any spans\");\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  _proto.createTransactionDataModel = function createTransactionDataModel(transaction) {\n    var transactionStart = transaction._start;\n    var spans = transaction.spans.map(function (span) {\n      var spanData = {\n        id: span.id,\n        transaction_id: transaction.id,\n        parent_id: span.parentId || transaction.id,\n        trace_id: transaction.traceId,\n        name: span.name,\n        type: span.type,\n        subtype: span.subtype,\n        action: span.action,\n        sync: span.sync,\n        start: parseInt(span._start - transactionStart),\n        duration: span.duration(),\n        context: span.context,\n        outcome: span.outcome,\n        sample_rate: span.sampleRate\n      };\n      return truncateModel(SPAN_MODEL, spanData);\n    });\n    var transactionData = {\n      id: transaction.id,\n      trace_id: transaction.traceId,\n      session: transaction.session,\n      name: transaction.name,\n      type: transaction.type,\n      duration: transaction.duration(),\n      spans: spans,\n      context: transaction.context,\n      marks: transaction.marks,\n      breakdown: transaction.breakdownTimings,\n      span_count: {\n        started: spans.length\n      },\n      sampled: transaction.sampled,\n      sample_rate: transaction.sampleRate,\n      experience: transaction.experience,\n      outcome: transaction.outcome\n    };\n    return truncateModel(TRANSACTION_MODEL, transactionData);\n  };\n\n  _proto.createTransactionPayload = function createTransactionPayload(transaction) {\n    var adjustedTransaction = adjustTransaction(transaction);\n    var filtered = this.filterTransaction(adjustedTransaction);\n\n    if (filtered) {\n      return this.createTransactionDataModel(transaction);\n    }\n  };\n\n  return PerformanceMonitoring;\n}();\n\nexport { PerformanceMonitoring as default };", "import { getDuration, PERF } from '../common/utils';\nimport { PAGE_LOAD, TRUNCATED_TYPE } from '../common/constants';\nvar pageLoadBreakdowns = [['domainLookupStart', 'domainLookupEnd', 'DNS'], ['connectStart', 'connectEnd', 'TCP'], ['requestStart', 'responseStart', 'Request'], ['responseStart', 'responseEnd', 'Response'], ['domLoading', 'domComplete', 'Processing'], ['loadEventStart', 'loadEventEnd', 'Load']];\n\nfunction getValue(value) {\n  return {\n    value: value\n  };\n}\n\nfunction calculateSelfTime(transaction) {\n  var spans = transaction.spans,\n      _start = transaction._start,\n      _end = transaction._end;\n\n  if (spans.length === 0) {\n    return transaction.duration();\n  }\n\n  spans.sort(function (span1, span2) {\n    return span1._start - span2._start;\n  });\n  var span = spans[0];\n  var spanEnd = span._end;\n  var spanStart = span._start;\n  var lastContinuousEnd = spanEnd;\n  var selfTime = spanStart - _start;\n\n  for (var i = 1; i < spans.length; i++) {\n    span = spans[i];\n    spanStart = span._start;\n    spanEnd = span._end;\n\n    if (spanStart > lastContinuousEnd) {\n      selfTime += spanStart - lastContinuousEnd;\n      lastContinuousEnd = spanEnd;\n    } else if (spanEnd > lastContinuousEnd) {\n      lastContinuousEnd = spanEnd;\n    }\n  }\n\n  if (lastContinuousEnd < _end) {\n    selfTime += _end - lastContinuousEnd;\n  }\n\n  return selfTime;\n}\n\nfunction groupSpans(transaction) {\n  var spanMap = {};\n  var transactionSelfTime = calculateSelfTime(transaction);\n  spanMap['app'] = {\n    count: 1,\n    duration: transactionSelfTime\n  };\n  var spans = transaction.spans;\n\n  for (var i = 0; i < spans.length; i++) {\n    var span = spans[i];\n    var duration = span.duration();\n\n    if (duration === 0 || duration == null) {\n      continue;\n    }\n\n    var type = span.type,\n        subtype = span.subtype;\n    var key = type.replace(TRUNCATED_TYPE, '');\n\n    if (subtype) {\n      key += '.' + subtype;\n    }\n\n    if (!spanMap[key]) {\n      spanMap[key] = {\n        duration: 0,\n        count: 0\n      };\n    }\n\n    spanMap[key].count++;\n    spanMap[key].duration += duration;\n  }\n\n  return spanMap;\n}\n\nfunction getSpanBreakdown(transactionDetails, _ref) {\n  var details = _ref.details,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count,\n      duration = _ref.duration;\n  return {\n    transaction: transactionDetails,\n    span: details,\n    samples: {\n      'span.self_time.count': getValue(count),\n      'span.self_time.sum.us': getValue(duration)\n    }\n  };\n}\n\nexport function captureBreakdown(transaction, timings) {\n  if (timings === void 0) {\n    timings = PERF.timing;\n  }\n\n  var breakdowns = [];\n  var trDuration = transaction.duration();\n  var name = transaction.name,\n      type = transaction.type,\n      sampled = transaction.sampled;\n  var transactionDetails = {\n    name: name,\n    type: type\n  };\n  breakdowns.push({\n    transaction: transactionDetails,\n    samples: {\n      'transaction.duration.count': getValue(1),\n      'transaction.duration.sum.us': getValue(trDuration),\n      'transaction.breakdown.count': getValue(sampled ? 1 : 0)\n    }\n  });\n\n  if (!sampled) {\n    return breakdowns;\n  }\n\n  if (type === PAGE_LOAD && timings) {\n    for (var i = 0; i < pageLoadBreakdowns.length; i++) {\n      var current = pageLoadBreakdowns[i];\n      var start = timings[current[0]];\n      var end = timings[current[1]];\n      var duration = getDuration(start, end);\n\n      if (duration === 0 || duration == null) {\n        continue;\n      }\n\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: current[2]\n        },\n        duration: duration\n      }));\n    }\n  } else {\n    var spanMap = groupSpans(transaction);\n    Object.keys(spanMap).forEach(function (key) {\n      var _key$split = key.split('.'),\n          type = _key$split[0],\n          subtype = _key$split[1];\n\n      var _spanMap$key = spanMap[key],\n          duration = _spanMap$key.duration,\n          count = _spanMap$key.count;\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: type,\n          subtype: subtype\n        },\n        duration: duration,\n        count: count\n      }));\n    });\n  }\n\n  return breakdowns;\n}", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport Span from './span';\nimport SpanBase from './span-base';\nimport { generateRandomId, merge, now, getTime, extend, removeInvalidChars } from '../common/utils';\nimport { REUSABILITY_THRESHOLD, TRUNCATED_TYPE } from '../common/constants';\nimport { captureBreakdown as _captureBreakdown } from './breakdown';\n\nvar Transaction = function (_SpanBase) {\n  _inheritsLoose(Transaction, _SpanBase);\n\n  function Transaction(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.traceId = generateRandomId();\n    _this.marks = undefined;\n    _this.spans = [];\n    _this._activeSpans = {};\n    _this._activeTasks = new Set();\n    _this.blocked = false;\n    _this.captureTimings = false;\n    _this.breakdownTimings = [];\n    _this.sampleRate = _this.options.transactionSampleRate;\n    _this.sampled = Math.random() <= _this.sampleRate;\n    return _this;\n  }\n\n  var _proto = Transaction.prototype;\n\n  _proto.addMarks = function addMarks(obj) {\n    this.marks = merge(this.marks || {}, obj);\n  };\n\n  _proto.mark = function mark(key) {\n    var skey = removeInvalidChars(key);\n\n    var markTime = now() - this._start;\n\n    var custom = {};\n    custom[skey] = markTime;\n    this.addMarks({\n      custom: custom\n    });\n  };\n\n  _proto.canReuse = function canReuse() {\n    var threshold = this.options.reuseThreshold || REUSABILITY_THRESHOLD;\n    return !!this.options.canReuse && !this.ended && now() - this._start < threshold;\n  };\n\n  _proto.redefine = function redefine(name, type, options) {\n    if (name) {\n      this.name = name;\n    }\n\n    if (type) {\n      this.type = type;\n    }\n\n    if (options) {\n      extend(this.options, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var _this2 = this;\n\n    if (this.ended) {\n      return;\n    }\n\n    var opts = extend({}, options);\n\n    opts.onEnd = function (trc) {\n      _this2._onSpanEnd(trc);\n    };\n\n    opts.traceId = this.traceId;\n    opts.sampled = this.sampled;\n    opts.sampleRate = this.sampleRate;\n\n    if (!opts.parentId) {\n      opts.parentId = this.id;\n    }\n\n    var span = new Span(name, type, opts);\n    this._activeSpans[span.id] = span;\n\n    if (opts.blocking) {\n      this.addTask(span.id);\n    }\n\n    return span;\n  };\n\n  _proto.isFinished = function isFinished() {\n    return !this.blocked && this._activeTasks.size === 0;\n  };\n\n  _proto.detectFinish = function detectFinish() {\n    if (this.isFinished()) this.end();\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n\n    for (var sid in this._activeSpans) {\n      var span = this._activeSpans[sid];\n      span.type = span.type + TRUNCATED_TYPE;\n      span.end(endTime);\n    }\n\n    this.callOnEnd();\n  };\n\n  _proto.captureBreakdown = function captureBreakdown() {\n    this.breakdownTimings = _captureBreakdown(this);\n  };\n\n  _proto.block = function block(flag) {\n    this.blocked = flag;\n\n    if (!this.blocked) {\n      this.detectFinish();\n    }\n  };\n\n  _proto.addTask = function addTask(taskId) {\n    if (!taskId) {\n      taskId = 'task-' + generateRandomId(16);\n    }\n\n    this._activeTasks.add(taskId);\n\n    return taskId;\n  };\n\n  _proto.removeTask = function removeTask(taskId) {\n    var deleted = this._activeTasks.delete(taskId);\n\n    deleted && this.detectFinish();\n  };\n\n  _proto.resetFields = function resetFields() {\n    this.spans = [];\n    this.sampleRate = 0;\n  };\n\n  _proto._onSpanEnd = function _onSpanEnd(span) {\n    this.spans.push(span);\n    delete this._activeSpans[span.id];\n    this.removeTask(span.id);\n  };\n\n  _proto.isManaged = function isManaged() {\n    return !!this.options.managed;\n  };\n\n  return Transaction;\n}(SpanBase);\n\nexport default Transaction;", "import { LONG_TASK, LARGEST_CONTENTFUL_PAINT, FIRST_CONTENTFUL_PAINT, FIRST_INPUT, LAYOUT_SHIFT } from '../common/constants';\nimport { noop, PERF } from '../common/utils';\nimport Span from './span';\nexport var metrics = {\n  fid: 0,\n  fcp: 0,\n  tbt: {\n    start: Infinity,\n    duration: 0\n  },\n  cls: 0,\n  longtask: {\n    count: 0,\n    duration: 0,\n    max: 0\n  }\n};\nvar LONG_TASK_THRESHOLD = 50;\nexport function createLongTaskSpans(longtasks, agg) {\n  var spans = [];\n\n  for (var i = 0; i < longtasks.length; i++) {\n    var _longtasks$i = longtasks[i],\n        name = _longtasks$i.name,\n        startTime = _longtasks$i.startTime,\n        duration = _longtasks$i.duration,\n        attribution = _longtasks$i.attribution;\n    var end = startTime + duration;\n    var span = new Span(\"Longtask(\" + name + \")\", LONG_TASK, {\n      startTime: startTime\n    });\n    agg.count++;\n    agg.duration += duration;\n    agg.max = Math.max(duration, agg.max);\n\n    if (attribution.length > 0) {\n      var _attribution$ = attribution[0],\n          _name = _attribution$.name,\n          containerType = _attribution$.containerType,\n          containerName = _attribution$.containerName,\n          containerId = _attribution$.containerId;\n      var customContext = {\n        attribution: _name,\n        type: containerType\n      };\n\n      if (containerName) {\n        customContext.name = containerName;\n      }\n\n      if (containerId) {\n        customContext.id = containerId;\n      }\n\n      span.addContext({\n        custom: customContext\n      });\n    }\n\n    span.end(end);\n    spans.push(span);\n  }\n\n  return spans;\n}\nexport function createFirstInputDelaySpan(fidEntries) {\n  var firstInput = fidEntries[0];\n\n  if (firstInput) {\n    var startTime = firstInput.startTime,\n        processingStart = firstInput.processingStart;\n    var span = new Span('First Input Delay', FIRST_INPUT, {\n      startTime: startTime\n    });\n    span.end(processingStart);\n    return span;\n  }\n}\nexport function createTotalBlockingTimeSpan(tbtObject) {\n  var start = tbtObject.start,\n      duration = tbtObject.duration;\n  var tbtSpan = new Span('Total Blocking Time', LONG_TASK, {\n    startTime: start\n  });\n  tbtSpan.end(start + duration);\n  return tbtSpan;\n}\nexport function calculateTotalBlockingTime(longtaskEntries) {\n  longtaskEntries.forEach(function (entry) {\n    var name = entry.name,\n        startTime = entry.startTime,\n        duration = entry.duration;\n\n    if (startTime < metrics.fcp) {\n      return;\n    }\n\n    if (name !== 'self' && name.indexOf('same-origin') === -1) {\n      return;\n    }\n\n    metrics.tbt.start = Math.min(metrics.tbt.start, startTime);\n    var blockingTime = duration - LONG_TASK_THRESHOLD;\n\n    if (blockingTime > 0) {\n      metrics.tbt.duration += blockingTime;\n    }\n  });\n}\nexport function calculateCumulativeLayoutShift(clsEntries) {\n  clsEntries.forEach(function (entry) {\n    if (!entry.hadRecentInput && entry.value) {\n      metrics.cls += entry.value;\n    }\n  });\n}\nexport function captureObserverEntries(list, _ref) {\n  var isHardNavigation = _ref.isHardNavigation,\n      trStart = _ref.trStart;\n  var longtaskEntries = list.getEntriesByType(LONG_TASK).filter(function (entry) {\n    return entry.startTime >= trStart;\n  });\n  var longTaskSpans = createLongTaskSpans(longtaskEntries, metrics.longtask);\n  var result = {\n    spans: longTaskSpans,\n    marks: {}\n  };\n\n  if (!isHardNavigation) {\n    return result;\n  }\n\n  var lcpEntries = list.getEntriesByType(LARGEST_CONTENTFUL_PAINT);\n  var lastLcpEntry = lcpEntries[lcpEntries.length - 1];\n\n  if (lastLcpEntry) {\n    var lcp = parseInt(lastLcpEntry.startTime);\n    metrics.lcp = lcp;\n    result.marks.largestContentfulPaint = lcp;\n  }\n\n  var timing = PERF.timing;\n  var unloadDiff = timing.fetchStart - timing.navigationStart;\n  var fcpEntry = list.getEntriesByName(FIRST_CONTENTFUL_PAINT)[0];\n\n  if (fcpEntry) {\n    var fcp = parseInt(unloadDiff >= 0 ? fcpEntry.startTime - unloadDiff : fcpEntry.startTime);\n    metrics.fcp = fcp;\n    result.marks.firstContentfulPaint = fcp;\n  }\n\n  var fidEntries = list.getEntriesByType(FIRST_INPUT);\n  var fidSpan = createFirstInputDelaySpan(fidEntries);\n\n  if (fidSpan) {\n    metrics.fid = fidSpan.duration();\n    result.spans.push(fidSpan);\n  }\n\n  calculateTotalBlockingTime(longtaskEntries);\n  var clsEntries = list.getEntriesByType(LAYOUT_SHIFT);\n  calculateCumulativeLayoutShift(clsEntries);\n  return result;\n}\nexport var PerfEntryRecorder = function () {\n  function PerfEntryRecorder(callback) {\n    this.po = {\n      observe: noop,\n      disconnect: noop\n    };\n\n    if (window.PerformanceObserver) {\n      this.po = new PerformanceObserver(callback);\n    }\n  }\n\n  var _proto = PerfEntryRecorder.prototype;\n\n  _proto.start = function start(type) {\n    try {\n      this.po.observe({\n        type: type,\n        buffered: true\n      });\n    } catch (_) {}\n  };\n\n  _proto.stop = function stop() {\n    this.po.disconnect();\n  };\n\n  return PerfEntryRecorder;\n}();", "import { Promise } from '../common/polyfills';\nimport Transaction from './transaction';\nimport { PerfEntryRecorder, captureObserverEntries, metrics, createTotalBlockingTimeSpan } from './metrics';\nimport { extend, getEarliestSpan, getLatestNonXHRSpan, isPerfTypeSupported, generateRandomId } from '../common/utils';\nimport { captureNavigation } from './capture-navigation';\nimport { PAGE_LOAD, NAME_UNKNOWN, TRANSACTION_START, TRANSACTION_END, TEMPORARY_TYPE, TRANSACTION_TYPE_ORDER, LARGEST_CONTENTFUL_PAINT, LONG_TASK, PAINT, TRUNCATED_TYPE, FIRST_INPUT, LAYOUT_SHIFT, SESSION_TIMEOUT } from '../common/constants';\nimport { addTransactionContext } from '../common/context';\nimport { __DEV__, state } from '../state';\nimport { slugifyUrl } from '../common/url';\n\nvar TransactionService = function () {\n  function TransactionService(logger, config) {\n    var _this = this;\n\n    this._config = config;\n    this._logger = logger;\n    this.currentTransaction = undefined;\n    this.respIntervalId = undefined;\n    this.recorder = new PerfEntryRecorder(function (list) {\n      var tr = _this.getCurrentTransaction();\n\n      if (tr && tr.captureTimings) {\n        var _tr$spans;\n\n        var isHardNavigation = tr.type === PAGE_LOAD;\n\n        var _captureObserverEntri = captureObserverEntries(list, {\n          isHardNavigation: isHardNavigation,\n          trStart: isHardNavigation ? 0 : tr._start\n        }),\n            spans = _captureObserverEntri.spans,\n            marks = _captureObserverEntri.marks;\n\n        (_tr$spans = tr.spans).push.apply(_tr$spans, spans);\n\n        tr.addMarks({\n          agent: marks\n        });\n      }\n    });\n  }\n\n  var _proto = TransactionService.prototype;\n\n  _proto.createCurrentTransaction = function createCurrentTransaction(name, type, options) {\n    var tr = new Transaction(name, type, options);\n    this.currentTransaction = tr;\n    return tr;\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.currentTransaction && !this.currentTransaction.ended) {\n      return this.currentTransaction;\n    }\n  };\n\n  _proto.createOptions = function createOptions(options) {\n    var config = this._config.config;\n    var presetOptions = {\n      transactionSampleRate: config.transactionSampleRate\n    };\n    var perfOptions = extend(presetOptions, options);\n\n    if (perfOptions.managed) {\n      perfOptions = extend({\n        pageLoadTraceId: config.pageLoadTraceId,\n        pageLoadSampled: config.pageLoadSampled,\n        pageLoadSpanId: config.pageLoadSpanId,\n        pageLoadTransactionName: config.pageLoadTransactionName\n      }, perfOptions);\n    }\n\n    return perfOptions;\n  };\n\n  _proto.startManagedTransaction = function startManagedTransaction(name, type, perfOptions) {\n    var tr = this.getCurrentTransaction();\n    var isRedefined = false;\n\n    if (!tr) {\n      tr = this.createCurrentTransaction(name, type, perfOptions);\n    } else if (tr.canReuse() && perfOptions.canReuse) {\n      var redefineType = tr.type;\n      var currentTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(tr.type);\n      var redefineTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(type);\n\n      if (currentTypeOrder >= 0 && redefineTypeOrder < currentTypeOrder) {\n        redefineType = type;\n      }\n\n      if (__DEV__) {\n        this._logger.debug(\"redefining transaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\", 'to', \"(\" + (name || tr.name) + \", \" + redefineType + \")\", tr);\n      }\n\n      tr.redefine(name, redefineType, perfOptions);\n      isRedefined = true;\n    } else {\n      if (__DEV__) {\n        this._logger.debug(\"ending previous transaction(\" + tr.id + \", \" + tr.name + \")\", tr);\n      }\n\n      tr.end();\n      tr = this.createCurrentTransaction(name, type, perfOptions);\n    }\n\n    if (tr.type === PAGE_LOAD) {\n      if (!isRedefined) {\n        this.recorder.start(LARGEST_CONTENTFUL_PAINT);\n        this.recorder.start(PAINT);\n        this.recorder.start(FIRST_INPUT);\n        this.recorder.start(LAYOUT_SHIFT);\n      }\n\n      if (perfOptions.pageLoadTraceId) {\n        tr.traceId = perfOptions.pageLoadTraceId;\n      }\n\n      if (perfOptions.pageLoadSampled) {\n        tr.sampled = perfOptions.pageLoadSampled;\n      }\n\n      if (tr.name === NAME_UNKNOWN && perfOptions.pageLoadTransactionName) {\n        tr.name = perfOptions.pageLoadTransactionName;\n      }\n    }\n\n    if (!isRedefined && this._config.get('monitorLongtasks')) {\n      this.recorder.start(LONG_TASK);\n    }\n\n    if (tr.sampled) {\n      tr.captureTimings = true;\n    }\n\n    return tr;\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    var _this2 = this;\n\n    var perfOptions = this.createOptions(options);\n    var tr;\n    var fireOnstartHook = true;\n\n    if (perfOptions.managed) {\n      var current = this.currentTransaction;\n      tr = this.startManagedTransaction(name, type, perfOptions);\n\n      if (current === tr) {\n        fireOnstartHook = false;\n      }\n    } else {\n      tr = new Transaction(name, type, perfOptions);\n    }\n\n    tr.onEnd = function () {\n      return _this2.handleTransactionEnd(tr);\n    };\n\n    if (fireOnstartHook) {\n      if (__DEV__) {\n        this._logger.debug(\"startTransaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\");\n      }\n\n      this._config.events.send(TRANSACTION_START, [tr]);\n    }\n\n    return tr;\n  };\n\n  _proto.handleTransactionEnd = function handleTransactionEnd(tr) {\n    var _this3 = this;\n\n    this.recorder.stop();\n    var currentUrl = window.location.href;\n    return Promise.resolve().then(function () {\n      var name = tr.name,\n          type = tr.type;\n      var lastHiddenStart = state.lastHiddenStart;\n\n      if (lastHiddenStart >= tr._start) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") was discarded! The page was hidden during the transaction!\");\n        }\n\n        return;\n      }\n\n      if (_this3.shouldIgnoreTransaction(name) || type === TEMPORARY_TYPE) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") is ignored\");\n        }\n\n        return;\n      }\n\n      if (type === PAGE_LOAD) {\n        var pageLoadTransactionName = _this3._config.get('pageLoadTransactionName');\n\n        if (name === NAME_UNKNOWN && pageLoadTransactionName) {\n          tr.name = pageLoadTransactionName;\n        }\n\n        if (tr.captureTimings) {\n          var cls = metrics.cls,\n              fid = metrics.fid,\n              tbt = metrics.tbt,\n              longtask = metrics.longtask;\n\n          if (tbt.duration > 0) {\n            tr.spans.push(createTotalBlockingTimeSpan(tbt));\n          }\n\n          tr.experience = {};\n\n          if (isPerfTypeSupported(LONG_TASK)) {\n            tr.experience.tbt = tbt.duration;\n          }\n\n          if (isPerfTypeSupported(LAYOUT_SHIFT)) {\n            tr.experience.cls = cls;\n          }\n\n          if (fid > 0) {\n            tr.experience.fid = fid;\n          }\n\n          if (longtask.count > 0) {\n            tr.experience.longtask = {\n              count: longtask.count,\n              sum: longtask.duration,\n              max: longtask.max\n            };\n          }\n        }\n\n        _this3.setSession(tr);\n      }\n\n      if (tr.name === NAME_UNKNOWN) {\n        tr.name = slugifyUrl(currentUrl);\n      }\n\n      captureNavigation(tr);\n\n      _this3.adjustTransactionTime(tr);\n\n      var breakdownMetrics = _this3._config.get('breakdownMetrics');\n\n      if (breakdownMetrics) {\n        tr.captureBreakdown();\n      }\n\n      var configContext = _this3._config.get('context');\n\n      addTransactionContext(tr, configContext);\n\n      _this3._config.events.send(TRANSACTION_END, [tr]);\n\n      if (__DEV__) {\n        _this3._logger.debug(\"end transaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\", tr);\n      }\n    }, function (err) {\n      if (__DEV__) {\n        _this3._logger.debug(\"error ending transaction(\" + tr.id + \", \" + tr.name + \")\", err);\n      }\n    });\n  };\n\n  _proto.setSession = function setSession(tr) {\n    var session = this._config.get('session');\n\n    if (session) {\n      if (typeof session == 'boolean') {\n        tr.session = {\n          id: generateRandomId(16),\n          sequence: 1\n        };\n      } else {\n        if (session.timestamp && Date.now() - session.timestamp > SESSION_TIMEOUT) {\n          tr.session = {\n            id: generateRandomId(16),\n            sequence: 1\n          };\n        } else {\n          tr.session = {\n            id: session.id,\n            sequence: session.sequence ? session.sequence + 1 : 1\n          };\n        }\n      }\n\n      var sessionConfig = {\n        session: {\n          id: tr.session.id,\n          sequence: tr.session.sequence,\n          timestamp: Date.now()\n        }\n      };\n\n      this._config.setConfig(sessionConfig);\n\n      this._config.setLocalConfig(sessionConfig, true);\n    }\n  };\n\n  _proto.adjustTransactionTime = function adjustTransactionTime(transaction) {\n    var spans = transaction.spans;\n    var earliestSpan = getEarliestSpan(spans);\n\n    if (earliestSpan && earliestSpan._start < transaction._start) {\n      transaction._start = earliestSpan._start;\n    }\n\n    var latestSpan = getLatestNonXHRSpan(spans);\n\n    if (latestSpan && latestSpan._end > transaction._end) {\n      transaction._end = latestSpan._end;\n    }\n\n    var transactionEnd = transaction._end;\n\n    for (var i = 0; i < spans.length; i++) {\n      var span = spans[i];\n\n      if (span._end > transactionEnd) {\n        span._end = transactionEnd;\n        span.type += TRUNCATED_TYPE;\n      }\n\n      if (span._start > transactionEnd) {\n        span._start = transactionEnd;\n      }\n    }\n  };\n\n  _proto.shouldIgnoreTransaction = function shouldIgnoreTransaction(transactionName) {\n    var ignoreList = this._config.get('ignoreTransactions');\n\n    if (ignoreList && ignoreList.length) {\n      for (var i = 0; i < ignoreList.length; i++) {\n        var element = ignoreList[i];\n\n        if (typeof element.test === 'function') {\n          if (element.test(transactionName)) {\n            return true;\n          }\n        } else if (element === transactionName) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var tr = this.getCurrentTransaction();\n\n    if (!tr) {\n      tr = this.createCurrentTransaction(undefined, TEMPORARY_TYPE, this.createOptions({\n        canReuse: true,\n        managed: true\n      }));\n    }\n\n    var span = tr.startSpan(name, type, options);\n\n    if (__DEV__) {\n      this._logger.debug(\"startSpan(\" + name + \", \" + span.type + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n    }\n\n    return span;\n  };\n\n  _proto.endSpan = function endSpan(span, context) {\n    if (!span) {\n      return;\n    }\n\n    if (__DEV__) {\n      var tr = this.getCurrentTransaction();\n      tr && this._logger.debug(\"endSpan(\" + span.name + \", \" + span.type + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n    }\n\n    span.end(null, context);\n  };\n\n  return TransactionService;\n}();\n\nexport default TransactionService;", "import PerformanceMonitoring from './performance-monitoring';\nimport TransactionService from './transaction-service';\nimport { APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\n\nfunction registerServices() {\n  serviceCreators['TransactionService'] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([LOGGING_SERVICE, CONFIG_SERVICE]),\n        loggingService = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1];\n\n    return new TransactionService(loggingService, configService);\n  };\n\n  serviceCreators['PerformanceMonitoring'] = function (serviceFactory) {\n    var _serviceFactory$getSe2 = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE, 'TransactionService']),\n        apmServer = _serviceFactory$getSe2[0],\n        configService = _serviceFactory$getSe2[1],\n        loggingService = _serviceFactory$getSe2[2],\n        transactionService = _serviceFactory$getSe2[3];\n\n    return new PerformanceMonitoring(apmServer, configService, loggingService, transactionService);\n  };\n}\n\nexport { registerServices };", "import { XMLHTTPREQUEST, FETCH, HISTORY, PAGE_LOAD, ERROR, EVENT_TARGET } from './constants';\nexport function getInstrumentationFlags(instrument, disabledInstrumentations) {\n  var _flags;\n\n  var flags = (_flags = {}, _flags[XMLHTTPREQUEST] = false, _flags[FETCH] = false, _flags[HISTORY] = false, _flags[PAGE_LOAD] = false, _flags[ERROR] = false, _flags[EVENT_TARGET] = false, _flags);\n\n  if (!instrument) {\n    return flags;\n  }\n\n  Object.keys(flags).forEach(function (key) {\n    if (disabledInstrumentations.indexOf(key) === -1) {\n      flags[key] = true;\n    }\n  });\n  return flags;\n}", "var RAF_TIMEOUT = 100;\nexport default function afterFrame(callback) {\n  var handler = function handler() {\n    clearTimeout(timeout);\n    cancelAnimationFrame(raf);\n    setTimeout(callback);\n  };\n\n  var timeout = setTimeout(handler, RAF_TIMEOUT);\n  var raf = requestAnimationFrame(handler);\n}", "import { isPlatformSupported, isBrowser, now } from './common/utils';\nimport { patchAll } from './common/patching';\nimport { state } from './state';\nvar enabled = false;\nexport function bootstrap() {\n  if (isPlatformSupported()) {\n    patchAll();\n    bootstrapPerf();\n    state.bootstrapTime = now();\n    enabled = true;\n  } else if (isBrowser) {\n    console.log('[Elastic APM] platform is not supported!');\n  }\n\n  return enabled;\n}\nexport function bootstrapPerf() {\n  if (document.visibilityState === 'hidden') {\n    state.lastHiddenStart = 0;\n  }\n\n  window.addEventListener('visibilitychange', function () {\n    if (document.visibilityState === 'hidden') {\n      state.lastHiddenStart = performance.now();\n    }\n  }, {\n    capture: true\n  });\n}", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport { Tracer as otTracer } from 'opentracing/lib/tracer';\nimport { REFERENCE_CHILD_OF, FORMAT_TEXT_MAP, FORMAT_HTTP_HEADERS, FORMAT_BINARY } from 'opentracing/lib/constants';\nimport { Span as NoopSpan } from 'opentracing/lib/span';\nimport { getTimeOrigin, find } from '../common/utils';\nimport { __DEV__ } from '../state';\nimport Span from './span';\n\nvar Tracer = function (_otTracer) {\n  _inheritsLoose(Tracer, _otTracer);\n\n  function Tracer(performanceMonitoring, transactionService, loggingService, errorLogging) {\n    var _this;\n\n    _this = _otTracer.call(this) || this;\n    _this.performanceMonitoring = performanceMonitoring;\n    _this.transactionService = transactionService;\n    _this.loggingService = loggingService;\n    _this.errorLogging = errorLogging;\n    return _this;\n  }\n\n  var _proto = Tracer.prototype;\n\n  _proto._startSpan = function _startSpan(name, options) {\n    var spanOptions = {\n      managed: true\n    };\n\n    if (options) {\n      spanOptions.timestamp = options.startTime;\n\n      if (options.childOf) {\n        spanOptions.parentId = options.childOf.id;\n      } else if (options.references && options.references.length > 0) {\n        if (options.references.length > 1) {\n          if (__DEV__) {\n            this.loggingService.debug('Elastic APM OpenTracing: Unsupported number of references, only the first childOf reference will be recorded.');\n          }\n        }\n\n        var childRef = find(options.references, function (ref) {\n          return ref.type() === REFERENCE_CHILD_OF;\n        });\n\n        if (childRef) {\n          spanOptions.parentId = childRef.referencedContext().id;\n        }\n      }\n    }\n\n    var span;\n    var currentTransaction = this.transactionService.getCurrentTransaction();\n\n    if (currentTransaction) {\n      span = this.transactionService.startSpan(name, undefined, spanOptions);\n    } else {\n      span = this.transactionService.startTransaction(name, undefined, spanOptions);\n    }\n\n    if (!span) {\n      return new NoopSpan();\n    }\n\n    if (spanOptions.timestamp) {\n      span._start = spanOptions.timestamp - getTimeOrigin();\n    }\n\n    var otSpan = new Span(this, span);\n\n    if (options && options.tags) {\n      otSpan.addTags(options.tags);\n    }\n\n    return otSpan;\n  };\n\n  _proto._inject = function _inject(spanContext, format, carrier) {\n    switch (format) {\n      case FORMAT_TEXT_MAP:\n      case FORMAT_HTTP_HEADERS:\n        this.performanceMonitoring.injectDtHeader(spanContext, carrier);\n        break;\n\n      case FORMAT_BINARY:\n        if (__DEV__) {\n          this.loggingService.debug('Elastic APM OpenTracing: binary carrier format is not supported.');\n        }\n\n        break;\n    }\n  };\n\n  _proto._extract = function _extract(format, carrier) {\n    var ctx;\n\n    switch (format) {\n      case FORMAT_TEXT_MAP:\n      case FORMAT_HTTP_HEADERS:\n        ctx = this.performanceMonitoring.extractDtHeader(carrier);\n        break;\n\n      case FORMAT_BINARY:\n        if (__DEV__) {\n          this.loggingService.debug('Elastic APM OpenTracing: binary carrier format is not supported.');\n        }\n\n        break;\n    }\n\n    if (!ctx) {\n      ctx = null;\n    }\n\n    return ctx;\n  };\n\n  return Tracer;\n}(otTracer);\n\nexport default Tracer;", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport { Span as otSpan } from 'opentracing/lib/span';\nimport { extend, getTimeOrigin } from '../common/utils';\nimport Transaction from '../performance-monitoring/transaction';\n\nvar Span = function (_otSpan) {\n  _inheritsLoose(Span, _otSpan);\n\n  function Span(tracer, span) {\n    var _this;\n\n    _this = _otSpan.call(this) || this;\n    _this.__tracer = tracer;\n    _this.span = span;\n    _this.isTransaction = span instanceof Transaction;\n    _this.spanContext = {\n      id: span.id,\n      traceId: span.traceId,\n      sampled: span.sampled\n    };\n    return _this;\n  }\n\n  var _proto = Span.prototype;\n\n  _proto._context = function _context() {\n    return this.spanContext;\n  };\n\n  _proto._tracer = function _tracer() {\n    return this.__tracer;\n  };\n\n  _proto._setOperationName = function _setOperationName(name) {\n    this.span.name = name;\n  };\n\n  _proto._addTags = function _addTags(keyValuePairs) {\n    var tags = extend({}, keyValuePairs);\n\n    if (tags.type) {\n      this.span.type = tags.type;\n      delete tags.type;\n    }\n\n    if (this.isTransaction) {\n      var userId = tags['user.id'];\n      var username = tags['user.username'];\n      var email = tags['user.email'];\n\n      if (userId || username || email) {\n        this.span.addContext({\n          user: {\n            id: userId,\n            username: username,\n            email: email\n          }\n        });\n        delete tags['user.id'];\n        delete tags['user.username'];\n        delete tags['user.email'];\n      }\n    }\n\n    this.span.addLabels(tags);\n  };\n\n  _proto._log = function _log(log, timestamp) {\n    if (log.event === 'error') {\n      if (log['error.object']) {\n        this.__tracer.errorLogging.logError(log['error.object']);\n      } else if (log.message) {\n        this.__tracer.errorLogging.logError(log.message);\n      }\n    }\n  };\n\n  _proto._finish = function _finish(finishTime) {\n    this.span.end();\n\n    if (finishTime) {\n      this.span._end = finishTime - getTimeOrigin();\n    }\n  };\n\n  return Span;\n}(otSpan);\n\nexport default Span;", "import { registerServices as registerErrorServices } from './error-logging';\nimport { registerServices as registerPerfServices } from './performance-monitoring';\nimport { ServiceFactory } from './common/service-factory';\nimport { isPlatformSupported, scheduleMicroTask, scheduleMacroTask, isBrowser } from './common/utils';\nimport { patchAll, patchEventHandler } from './common/patching';\nimport { PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from './common/constants';\nimport { getInstrumentationFlags } from './common/instrument';\nimport afterFrame from './common/after-frame';\nimport { bootstrap } from './bootstrap';\nimport { createTracer } from './opentracing';\n\nfunction createServiceFactory() {\n  registerPerfServices();\n  registerErrorServices();\n  var serviceFactory = new ServiceFactory();\n  return serviceFactory;\n}\n\nexport { createServiceFactory, ServiceFactory, patchAll, patchEventHandler, isPlatformSupported, isBrowser, getInstrumentationFlags, createTracer, scheduleMicroTask, scheduleMacroTask, afterFrame, ERROR, PAGE_LOAD, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER, bootstrap };", "import { getInstrumentationFlags, PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from '@elastic/apm-rum-core';\n\nvar ApmBase = function () {\n  function ApmBase(serviceFactory, disable) {\n    this._disable = disable;\n    this.serviceFactory = serviceFactory;\n    this._initialized = false;\n  }\n\n  var _proto = ApmBase.prototype;\n\n  _proto.isEnabled = function isEnabled() {\n    return !this._disable;\n  };\n\n  _proto.isActive = function isActive() {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    return this.isEnabled() && this._initialized && configService.get('active');\n  };\n\n  _proto.init = function init(config) {\n    var _this = this;\n\n    if (this.isEnabled() && !this._initialized) {\n      this._initialized = true;\n\n      var _this$serviceFactory$ = this.serviceFactory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n          configService = _this$serviceFactory$[0],\n          loggingService = _this$serviceFactory$[1];\n\n      configService.setVersion('5.9.1');\n      this.config(config);\n      var logLevel = configService.get('logLevel');\n      loggingService.setLevel(logLevel);\n      var isConfigActive = configService.get('active');\n\n      if (isConfigActive) {\n        this.serviceFactory.init();\n        var flags = getInstrumentationFlags(configService.get('instrument'), configService.get('disableInstrumentations'));\n        var performanceMonitoring = this.serviceFactory.getService('PerformanceMonitoring');\n        performanceMonitoring.init(flags);\n\n        if (flags[ERROR]) {\n          var errorLogging = this.serviceFactory.getService('ErrorLogging');\n          errorLogging.registerListeners();\n        }\n\n        if (configService.get('session')) {\n          var localConfig = configService.getLocalConfig();\n\n          if (localConfig && localConfig.session) {\n            configService.setConfig({\n              session: localConfig.session\n            });\n          }\n        }\n\n        var sendPageLoad = function sendPageLoad() {\n          return flags[PAGE_LOAD] && _this._sendPageLoadMetrics();\n        };\n\n        if (configService.get('centralConfig')) {\n          this.fetchCentralConfig().then(sendPageLoad);\n        } else {\n          sendPageLoad();\n        }\n      } else {\n        this._disable = true;\n        loggingService.warn('RUM agent is inactive');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.fetchCentralConfig = function fetchCentralConfig() {\n    var _this$serviceFactory$2 = this.serviceFactory.getService([APM_SERVER, LOGGING_SERVICE, CONFIG_SERVICE]),\n        apmServer = _this$serviceFactory$2[0],\n        loggingService = _this$serviceFactory$2[1],\n        configService = _this$serviceFactory$2[2];\n\n    return apmServer.fetchConfig(configService.get('serviceName'), configService.get('environment')).then(function (config) {\n      var transactionSampleRate = config['transaction_sample_rate'];\n\n      if (transactionSampleRate) {\n        transactionSampleRate = Number(transactionSampleRate);\n        var _config2 = {\n          transactionSampleRate: transactionSampleRate\n        };\n\n        var _configService$valida = configService.validate(_config2),\n            invalid = _configService$valida.invalid;\n\n        if (invalid.length === 0) {\n          configService.setConfig(_config2);\n        } else {\n          var _invalid$ = invalid[0],\n              key = _invalid$.key,\n              value = _invalid$.value,\n              allowed = _invalid$.allowed;\n          loggingService.warn(\"invalid value \\\"\" + value + \"\\\" for \" + key + \". Allowed: \" + allowed + \".\");\n        }\n      }\n\n      return config;\n    }).catch(function (error) {\n      loggingService.warn('failed fetching config:', error);\n    });\n  };\n\n  _proto._sendPageLoadMetrics = function _sendPageLoadMetrics() {\n    var tr = this.startTransaction(undefined, PAGE_LOAD, {\n      managed: true,\n      canReuse: true\n    });\n\n    if (!tr) {\n      return;\n    }\n\n    tr.addTask(PAGE_LOAD);\n\n    var sendPageLoadMetrics = function sendPageLoadMetrics() {\n      setTimeout(function () {\n        return tr.removeTask(PAGE_LOAD);\n      });\n    };\n\n    if (document.readyState === 'complete') {\n      sendPageLoadMetrics();\n    } else {\n      window.addEventListener('load', sendPageLoadMetrics);\n    }\n  };\n\n  _proto.observe = function observe(name, fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.events.observe(name, fn);\n  };\n\n  _proto.config = function config(_config) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n\n    var _configService$valida2 = configService.validate(_config),\n        missing = _configService$valida2.missing,\n        invalid = _configService$valida2.invalid;\n\n    if (missing.length === 0 && invalid.length === 0) {\n      configService.setConfig(_config);\n    } else {\n      var loggingService = this.serviceFactory.getService(LOGGING_SERVICE);\n      var separator = ', ';\n      var message = \"RUM agent isn't correctly configured. \";\n\n      if (missing.length > 0) {\n        message += missing.join(separator) + ' is missing';\n\n        if (invalid.length > 0) {\n          message += separator;\n        }\n      }\n\n      invalid.forEach(function (_ref, index) {\n        var key = _ref.key,\n            value = _ref.value,\n            allowed = _ref.allowed;\n        message += key + \" \\\"\" + value + \"\\\" contains invalid characters! (allowed: \" + allowed + \")\" + (index !== invalid.length - 1 ? separator : '');\n      });\n      loggingService.error(message);\n      configService.setConfig({\n        active: false\n      });\n    }\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setUserContext(userContext);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setCustomContext(customContext);\n  };\n\n  _proto.addLabels = function addLabels(labels) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addLabels(labels);\n  };\n\n  _proto.setInitialPageLoadName = function setInitialPageLoadName(name) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setConfig({\n      pageLoadTransactionName: name\n    });\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.startTransaction(name, type, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.startSpan(name, type, options);\n    }\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.getCurrentTransaction();\n    }\n  };\n\n  _proto.captureError = function captureError(error) {\n    if (this.isEnabled()) {\n      var errorLogging = this.serviceFactory.getService('ErrorLogging');\n      return errorLogging.logError(error);\n    }\n  };\n\n  _proto.addFilter = function addFilter(fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addFilter(fn);\n  };\n\n  return ApmBase;\n}();\n\nexport { ApmBase as default };", "import { createServiceFactory, bootstrap, isBrowser } from '@elastic/apm-rum-core';\nimport ApmBase from './apm-base';\n\nfunction getApmBase() {\n  if (isBrowser && window.elasticApm) {\n    return window.elasticApm;\n  }\n\n  var enabled = bootstrap();\n  var serviceFactory = createServiceFactory();\n  var apmBase = new ApmBase(serviceFactory, !enabled);\n\n  if (isBrowser) {\n    window.elasticApm = apmBase;\n  }\n\n  return apmBase;\n}\n\nvar apmBase = getApmBase();\nvar init = apmBase.init.bind(apmBase);\nexport default init;\nexport { init, apmBase, ApmBase, apmBase as apm };"],
  "mappings": "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",
  "names": ["SpanContext", "noop", "Span", "Reference", "Tracer", "stackParser", "resolve", "reject", "i", "val", "Promise", "self", "resolve", "reject", "i", "val", "Promise", "noop", "Promise", "Url", "location", "RESOURCE", "destination", "_loop", "i", "_excluded", "_objectWithoutPropertiesLoose", "ErrorLogging", "Queue", "NDJSON", "SpanBase", "_setPrototypeOf", "o", "p", "Span", "destination", "Promise", "resolve", "payload", "ApmServer", "noop", "init", "onFlush", "Promise", "resolve", "reject", "EventHandler", "Config", "init", "merge", "LoggingService", "noop", "ServiceFactory", "init", "ERROR", "self", "init", "Promise", "resolve", "reject", "state", "PerformanceMonitoring", "init", "type", "duration", "_inheritsLoose", "_setPrototypeOf", "o", "p", "Transaction", "captureBreakdown", "PerfEntryRecorder", "noop", "TransactionService", "Promise", "registerServices", "handler", "import_constants", "import_span", "import_span", "_inheritsLoose", "_setPrototypeOf", "o", "p", "Span", "otSpan", "span_default", "_inheritsLoose", "_setPrototypeOf", "o", "p", "Tracer", "NoopSpan", "otSpan", "span_default", "otTracer", "registerServices", "ApmBase", "init", "sendPageLoad", "sendPageLoadMetrics", "enabled", "apmBase"]
}
